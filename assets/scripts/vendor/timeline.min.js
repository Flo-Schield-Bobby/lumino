/**
 * vis.js
 * https://github.com/almende/vis
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 1.0.2
 * @date    2014-06-05
 *
 * @license
 * Copyright (C) 2011-2014 Almende B.V, http://almende.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.timeline=t()}}(function(){var define,module,exports;return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return r(i?i:t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(require,module,exports){function DataSet(t,e){if(this.id=util.randomUUID(),!t||Array.isArray(t)||util.isDataTable(t)||(e=t,t=null),this.options=e||{},this.data={},this.fieldId=this.options.fieldId||"id",this.convert={},this.showInternalIds=this.options.showInternalIds||!1,this.options.convert)for(var i in this.options.convert)if(this.options.convert.hasOwnProperty(i)){var n=this.options.convert[i];this.convert[i]="Date"==n||"ISODate"==n||"ASPDate"==n?"Date":n}this.subscribers={},this.internalIds={},t&&this.add(t)}function DataView(t,e){this.id=util.randomUUID(),this.data=null,this.ids={},this.options=e||{},this.fieldId="id",this.subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(t)}function TimeStep(t,e,i){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale=TimeStep.SCALE.DAY,this.step=1,this.setRange(t,e,i)}function Range(t,e,i){this.id=util.randomUUID(),this.start=null,this.end=null,this.root=t,this.parent=e,this.options=i||{},this.root.on("dragstart",this._onDragStart.bind(this)),this.root.on("drag",this._onDrag.bind(this)),this.root.on("dragend",this._onDragEnd.bind(this)),this.root.on("hold",this._onHold.bind(this)),this.root.on("mousewheel",this._onMouseWheel.bind(this)),this.root.on("DOMMouseScroll",this._onMouseWheel.bind(this)),this.root.on("touch",this._onTouch.bind(this)),this.root.on("pinch",this._onPinch.bind(this)),this.setOptions(i)}function validateDirection(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'+t+'". Choose "horizontal" or "vertical".')}function getPointer(t,e){return{x:t.pageX-vis.util.getAbsoluteLeft(e),y:t.pageY-vis.util.getAbsoluteTop(e)}}function Component(){this.id=null,this.parent=null,this.childs=null,this.options=null,this.top=0,this.left=0,this.width=0,this.height=0}function Panel(t){this.id=util.randomUUID(),this.parent=null,this.childs=[],this.options=t||{},this.frame="undefined"!=typeof document?document.createElement("div"):null}function RootPanel(t,e){if(this.id=util.randomUUID(),this.container=t,this.options=e||{},this.defaultOptions={autoResize:!0},this._create(),!this.container)throw new Error("Cannot repaint root panel: no container attached");this.container.appendChild(this.getFrame()),this._initWatch()}function TimeAxis(t){this.id=util.randomUUID(),this.dom={majorLines:[],majorTexts:[],minorLines:[],minorTexts:[],redundant:{majorLines:[],majorTexts:[],minorLines:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.options=t||{},this.defaultOptions={orientation:"bottom",showMinorLabels:!0,showMajorLabels:!0},this.range=null,this._create()}function CurrentTime(t,e){this.id=util.randomUUID(),this.range=t,this.options=e||{},this.defaultOptions={showCurrentTime:!1},this._create()}function CustomTime(t){this.id=util.randomUUID(),this.options=t||{},this.defaultOptions={showCustomTime:!1},this.customTime=new Date,this.eventParams={},this._create()}function ItemSet(t,e,i,n){this.id=util.randomUUID(),this.options=n||{},this.backgroundPanel=t,this.axisPanel=e,this.sidePanel=i,this.itemOptions=Object.create(this.options),this.dom={},this.hammer=null;var r=this;this.itemsData=null,this.groupsData=null,this.range=null,this.itemListeners={add:function(t,e,i){i!=r.id&&r._onAdd(e.items)},update:function(t,e,i){i!=r.id&&r._onUpdate(e.items)},remove:function(t,e,i){i!=r.id&&r._onRemove(e.items)}},this.groupListeners={add:function(t,e,i){i!=r.id&&r._onAddGroups(e.items)},update:function(t,e,i){i!=r.id&&r._onUpdateGroups(e.items)},remove:function(t,e,i){i!=r.id&&r._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this._create()}function Item(t,e,i){this.id=null,this.parent=null,this.data=t,this.dom=null,this.options=e||{},this.defaultOptions=i||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.left=null,this.width=null,this.height=null}function ItemBox(t,e,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);Item.call(this,t,e,i)}function ItemPoint(t,e,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}},t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);Item.call(this,t,e,i)}function ItemRange(t,e,i){if(this.props={content:{width:0}},t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}Item.call(this,t,e,i)}function ItemRangeOverflow(t,e,i){this.props={content:{left:0,width:0}},ItemRange.call(this,t,e,i)}function Group(t,e,i){this.groupId=t,this.itemSet=i,this.dom={},this.props={label:{width:0,height:0}},this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this._create(),this.setData(e)}function Timeline(t,e,i){if(!t)throw new Error("No container element provided");var n=this,r=moment().hours(0).minutes(0).seconds(0).milliseconds(0);this.defaultOptions={orientation:"bottom",direction:"horizontal",autoResize:!0,stack:!0,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},selectable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10,showMinorLabels:!0,showMajorLabels:!0,showCurrentTime:!1,showCustomTime:!1,groupOrder:null,width:null,height:null,maxHeight:null,minHeight:null,type:"box",align:"center",margin:{axis:20,item:10},padding:5,onAdd:function(t,e){e(t)},onUpdate:function(t,e){e(t)},onMove:function(t,e){e(t)},onRemove:function(t,e){e(t)}},this.options={},util.deepExtend(this.options,this.defaultOptions),util.deepExtend(this.options,{snap:null,toScreen:n._toScreen.bind(n),toTime:n._toTime.bind(n)});var s=util.extend(Object.create(this.options),{height:function(){return n.options.height?n.options.height:n.timeAxis.height+n.contentPanel.height+"px"}});this.rootPanel=new RootPanel(t,s),this.rootPanel.on("tap",this._onSelectItem.bind(this)),this.rootPanel.on("hold",this._onMultiSelectItem.bind(this)),this.rootPanel.on("doubletap",this._onAddItem.bind(this));var o=util.extend(Object.create(this.options),{top:function(){return"top"==o.orientation?"0":""},bottom:function(){return"top"==o.orientation?"":"0"},left:"0",right:null,height:"100%",width:function(){return n.itemSet?n.itemSet.getLabelsWidth():0},className:function(){return"side"+(n.groupsData?"":" hidden")}});this.sidePanel=new Panel(o),this.rootPanel.appendChild(this.sidePanel);var a=util.extend(Object.create(this.options),{left:function(){return n.sidePanel.width},right:null,height:"100%",width:function(){return n.rootPanel.width-n.sidePanel.width},className:"main"});this.mainPanel=new Panel(a),this.rootPanel.appendChild(this.mainPanel);var h=Object.create(this.options);this.range=new Range(this.rootPanel,this.mainPanel,h),this.range.setRange(r.clone().add("days",-3).valueOf(),r.clone().add("days",4).valueOf()),this.range.on("rangechange",function(t){n.rootPanel.repaint(),n.emit("rangechange",t)}),this.range.on("rangechanged",function(t){n.rootPanel.repaint(),n.emit("rangechanged",t)});var u=util.extend(Object.create(s),{range:this.range,left:null,top:null,width:null,height:null});this.timeAxis=new TimeAxis(u),this.timeAxis.setRange(this.range),this.options.snap=this.timeAxis.snap.bind(this.timeAxis),this.mainPanel.appendChild(this.timeAxis);var l=util.extend(Object.create(this.options),{top:function(){return"top"==n.options.orientation?n.timeAxis.height+"px":""},bottom:function(){return"top"==n.options.orientation?"":n.timeAxis.height+"px"},left:null,right:null,height:null,width:null,className:"content"});this.contentPanel=new Panel(l),this.mainPanel.appendChild(this.contentPanel);var p=util.extend(Object.create(this.options),{top:function(){return"top"==n.options.orientation?n.timeAxis.height+"px":""},bottom:function(){return"top"==n.options.orientation?"":n.timeAxis.height+"px"},left:null,right:null,height:function(){return n.contentPanel.height},width:null,className:"background"});this.backgroundPanel=new Panel(p),this.mainPanel.insertBefore(this.backgroundPanel,this.contentPanel);var d=util.extend(Object.create(s),{left:0,top:function(){return"top"==n.options.orientation?n.timeAxis.height+"px":""},bottom:function(){return"top"==n.options.orientation?"":n.timeAxis.height+"px"},width:"100%",height:0,className:"axis"});this.axisPanel=new Panel(d),this.mainPanel.appendChild(this.axisPanel);var c=util.extend(Object.create(this.options),{top:function(){return"top"==n.options.orientation?n.timeAxis.height+"px":""},bottom:function(){return"top"==n.options.orientation?"":n.timeAxis.height+"px"},left:null,right:null,height:null,width:null,className:"side-content"});this.sideContentPanel=new Panel(c),this.sidePanel.appendChild(this.sideContentPanel),this.currentTime=new CurrentTime(this.range,s),this.customTime=new CustomTime(s),this.customTime.on("timechange",function(t){n.emit("timechange",t)}),this.customTime.on("timechanged",function(t){n.emit("timechanged",t)});var m=util.extend(Object.create(this.options),{left:null,right:null,top:null,bottom:null,width:null,height:null});this.itemSet=new ItemSet(this.backgroundPanel,this.axisPanel,this.sideContentPanel,m),this.itemSet.setRange(this.range),this.itemSet.on("change",n.rootPanel.repaint.bind(n.rootPanel)),this.contentPanel.appendChild(this.itemSet),this.itemsData=null,this.groupsData=null,i&&this.setOptions(i),e&&this.setItems(e)}var moment="undefined"!=typeof window&&window.moment||require("moment"),Emitter=require("emitter-component"),Hammer;Hammer="undefined"!=typeof window?window.Hammer||require("hammerjs"):function(){throw Error("hammer.js is only available in a browser, not in node.js.")};var mousetrap;if(mousetrap="undefined"!=typeof window?window.mousetrap||require("mousetrap"):function(){throw Error("mouseTrap is only available in a browser, not in node.js.")},!Array.prototype.indexOf){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1};try{console.log("Warning: Ancient browser detected. Please update your browser")}catch(err){}}Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length;n>i;++i)t.call(e||this,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var i,n,r;if(null==this)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(i=e),n=new Array(o),r=0;o>r;){var a,h;r in s&&(a=s[r],h=t.call(i,a,r,s),n[r]=h),r++}return n}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],r=arguments[1],s=0;i>s;s++)if(s in e){var o=e[s];t.call(r,o,s,e)&&n.push(o)}return n}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(r){if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in r)t.call(r,o)&&s.push(o);if(e)for(var a=0;n>a;a++)t.call(r,i[a])&&s.push(i[a]);return s}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),Object.create||(Object.create=function(t){function e(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return e.prototype=t,new e}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r});var util={};util.isNumber=function(t){return t instanceof Number||"number"==typeof t},util.isString=function(t){return t instanceof String||"string"==typeof t},util.isDate=function(t){if(t instanceof Date)return!0;if(util.isString(t)){var e=ASPDateRegex.exec(t);if(e)return!0;if(!isNaN(Date.parse(t)))return!0}return!1},util.isDataTable=function(t){return"undefined"!=typeof google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable},util.randomUUID=function(){var t=function(){return Math.floor(65536*Math.random()).toString(16)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},util.extend=function(t){for(var e=1,i=arguments.length;i>e;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&void 0!==n[r]&&(t[r]=n[r])}return t},util.deepExtend=function t(e,i){if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n in i)if(i.hasOwnProperty(n))if(i[n]&&i[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n].constructor===Object?t(e[n],i[n]):e[n]=i[n];else{if(Array.isArray(i[n]))throw new TypeError("Arrays are not supported by deepExtend");e[n]=i[n]}return e},util.equalArray=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i]!=e[i])return!1;return!0},util.convert=function(t,e){var i;if(void 0===t)return void 0;if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(util.isNumber(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(moment.isMoment(t))return new Date(t.valueOf());if(util.isString(t))return i=ASPDateRegex.exec(t),i?new Date(Number(i[1])):moment(t).toDate();throw new Error("Cannot convert object of type "+util.getType(t)+" to type Date");case"Moment":if(util.isNumber(t))return moment(t);if(t instanceof Date)return moment(t.valueOf());if(moment.isMoment(t))return moment(t);if(util.isString(t))return i=ASPDateRegex.exec(t),moment(i?Number(i[1]):t);throw new Error("Cannot convert object of type "+util.getType(t)+" to type Date");case"ISODate":if(util.isNumber(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(moment.isMoment(t))return t.toDate().toISOString();if(util.isString(t))return i=ASPDateRegex.exec(t),i?new Date(Number(i[1])).toISOString():new Date(t).toISOString();throw new Error("Cannot convert object of type "+util.getType(t)+" to type ISODate");case"ASPDate":if(util.isNumber(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(util.isString(t)){i=ASPDateRegex.exec(t);var n;return n=i?new Date(Number(i[1])).valueOf():new Date(t).valueOf(),"/Date("+n+")/"}throw new Error("Cannot convert object of type "+util.getType(t)+" to type ASPDate");default:throw new Error("Cannot convert object of type "+util.getType(t)+' to type "'+e+'"')}};var ASPDateRegex=/^\/?Date\((\-?\d+)/i;util.getType=function(t){var e=typeof t;return"object"==e?null==t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":t instanceof Array?"Array":t instanceof Date?"Date":"Object":"number"==e?"Number":"boolean"==e?"Boolean":"string"==e?"String":e},util.getAbsoluteLeft=function(t){for(var e=document.documentElement,i=document.body,n=t.offsetLeft,r=t.offsetParent;null!=r&&r!=i&&r!=e;)n+=r.offsetLeft,n-=r.scrollLeft,r=r.offsetParent;return n},util.getAbsoluteTop=function(t){for(var e=document.documentElement,i=document.body,n=t.offsetTop,r=t.offsetParent;null!=r&&r!=i&&r!=e;)n+=r.offsetTop,n-=r.scrollTop,r=r.offsetParent;return n},util.getPageY=function(t){if("pageY"in t)return t.pageY;var e;e="targetTouches"in t&&t.targetTouches.length?t.targetTouches[0].clientY:t.clientY;var i=document.documentElement,n=document.body;return e+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)},util.getPageX=function(t){if("pageY"in t)return t.pageX;var e;e="targetTouches"in t&&t.targetTouches.length?t.targetTouches[0].clientX:t.clientX;var i=document.documentElement,n=document.body;return e+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0)},util.addClassName=function(t,e){var i=t.className.split(" ");-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" "))},util.removeClassName=function(t,e){var i=t.className.split(" "),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))},util.forEach=function(t,e){var i,n;if(t instanceof Array)for(i=0,n=t.length;n>i;i++)e(t[i],i,t);else for(i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},util.toArray=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},util.updateProperty=function(t,e,i){return t[e]!==i?(t[e]=i,!0):!1},util.addEventListener=function(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)},util.removeEventListener=function(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)},util.getTarget=function(t){t||(t=window.event);var e;return t.target?e=t.target:t.srcElement&&(e=t.srcElement),void 0!=e.nodeType&&3==e.nodeType&&(e=e.parentNode),e},util.fakeGesture=function(t,e){var i=null,n=Hammer.event.collectEventData(this,i,e);return isNaN(n.center.pageX)&&(n.center.pageX=e.pageX),isNaN(n.center.pageY)&&(n.center.pageY=e.pageY),n},util.option={},util.option.asBoolean=function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},util.option.asNumber=function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},util.option.asString=function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},util.option.asSize=function(t,e){return"function"==typeof t&&(t=t()),util.isString(t)?t:util.isNumber(t)?t+"px":e||null},util.option.asElement=function(t,e){return"function"==typeof t&&(t=t()),t||e||null},util.GiveDec=function GiveDec(Hex){var Value;return Value="A"==Hex?10:"B"==Hex?11:"C"==Hex?12:"D"==Hex?13:"E"==Hex?14:"F"==Hex?15:eval(Hex)},util.GiveHex=function(t){var e;return e=10==t?"A":11==t?"B":12==t?"C":13==t?"D":14==t?"E":15==t?"F":""+t},util.parseColor=function(t){var e;if(util.isString(t))if(util.isValidHex(t)){var i=util.hexToHSV(t),n={h:i.h,s:.45*i.s,v:Math.min(1,1.05*i.v)},r={h:i.h,s:Math.min(1,1.25*i.v),v:.6*i.v},s=util.HSVToHex(r.h,r.h,r.v),o=util.HSVToHex(n.h,n.s,n.v);e={background:t,border:s,highlight:{background:o,border:s}}}else e={background:t,border:t,highlight:{background:t,border:t}};else e={},e.background=t.background||"white",e.border=t.border||e.background,util.isString(t.highlight)?e.highlight={border:t.highlight,background:t.highlight}:(e.highlight={},e.highlight.background=t.highlight&&t.highlight.background||e.background,e.highlight.border=t.highlight&&t.highlight.border||e.border);return e},util.hexToRGB=function(t){t=t.replace("#","").toUpperCase();var e=util.GiveDec(t.substring(0,1)),i=util.GiveDec(t.substring(1,2)),n=util.GiveDec(t.substring(2,3)),r=util.GiveDec(t.substring(3,4)),s=util.GiveDec(t.substring(4,5)),o=util.GiveDec(t.substring(5,6)),a=16*e+i,h=16*n+r,i=16*s+o;return{r:a,g:h,b:i}},util.RGBToHex=function(t,e,i){var n=util.GiveHex(Math.floor(t/16)),r=util.GiveHex(t%16),s=util.GiveHex(Math.floor(e/16)),o=util.GiveHex(e%16),a=util.GiveHex(Math.floor(i/16)),h=util.GiveHex(i%16),u=n+r+s+o+a+h;return"#"+u},util.RGBToHSV=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),r=Math.max(t,Math.max(e,i));if(n==r)return{h:0,s:0,v:n};var s=t==n?e-i:i==n?t-e:i-t,o=t==n?3:i==n?1:5,a=60*(o-s/(r-n))/360,h=(r-n)/r,u=r;return{h:a,s:h,v:u}},util.HSVToRGB=function(t,e,i){var n,r,s,o=Math.floor(6*t),a=6*t-o,h=i*(1-e),u=i*(1-a*e),l=i*(1-(1-a)*e);switch(o%6){case 0:n=i,r=l,s=h;break;case 1:n=u,r=i,s=h;break;case 2:n=h,r=i,s=l;break;case 3:n=h,r=u,s=i;break;case 4:n=l,r=h,s=i;break;case 5:n=i,r=h,s=u}return{r:Math.floor(255*n),g:Math.floor(255*r),b:Math.floor(255*s)}},util.HSVToHex=function(t,e,i){var n=util.HSVToRGB(t,e,i);return util.RGBToHex(n.r,n.g,n.b)},util.hexToHSV=function(t){var e=util.hexToRGB(t);return util.RGBToHSV(e.r,e.g,e.b)},util.isValidHex=function(t){var e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return e},util.copyObject=function(t,e){for(var i in t)t.hasOwnProperty(i)&&("object"==typeof t[i]?(e[i]={},util.copyObject(t[i],e[i])):e[i]=t[i])},DataSet.prototype.on=function(t,e){var i=this.subscribers[t];i||(i=[],this.subscribers[t]=i),i.push({callback:e})},DataSet.prototype.subscribe=DataSet.prototype.on,DataSet.prototype.off=function(t,e){var i=this.subscribers[t];i&&(this.subscribers[t]=i.filter(function(t){return t.callback!=e}))},DataSet.prototype.unsubscribe=DataSet.prototype.off,DataSet.prototype._trigger=function(t,e,i){if("*"==t)throw new Error("Cannot trigger event *");var n=[];t in this.subscribers&&(n=n.concat(this.subscribers[t])),"*"in this.subscribers&&(n=n.concat(this.subscribers["*"]));for(var r=0;r<n.length;r++){var s=n[r];s.callback&&s.callback(t,e,i||null)}},DataSet.prototype.add=function(t,e){var i,n=[],r=this;if(t instanceof Array)for(var s=0,o=t.length;o>s;s++)i=r._addItem(t[s]),n.push(i);else if(util.isDataTable(t))for(var a=this._getColumnNames(t),h=0,u=t.getNumberOfRows();u>h;h++){for(var l={},p=0,d=a.length;d>p;p++){var c=a[p];l[c]=t.getValue(h,p)}i=r._addItem(l),n.push(i)}else{if(!(t instanceof Object))throw new Error("Unknown dataType");i=r._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n},DataSet.prototype.update=function(t,e){var i=[],n=[],r=this,s=r.fieldId,o=function(t){var e=t[s];r.data[e]?(e=r._updateItem(t),n.push(e)):(e=r._addItem(t),i.push(e))};if(t instanceof Array)for(var a=0,h=t.length;h>a;a++)o(t[a]);else if(util.isDataTable(t))for(var u=this._getColumnNames(t),l=0,p=t.getNumberOfRows();p>l;l++){for(var d={},c=0,m=u.length;m>c;c++){var f=u[c];d[f]=t.getValue(l,c)}o(d)}else{if(!(t instanceof Object))throw new Error("Unknown dataType");o(t)}return i.length&&this._trigger("add",{items:i},e),n.length&&this._trigger("update",{items:n},e),i.concat(n)},DataSet.prototype.get=function(){var t,e,i,n,r=this,s=this.showInternalIds,o=util.getType(arguments[0]);"String"==o||"Number"==o?(t=arguments[0],i=arguments[1],n=arguments[2]):"Array"==o?(e=arguments[0],i=arguments[1],n=arguments[2]):(i=arguments[0],n=arguments[1]);var a;if(i&&i.type){if(a="DataTable"==i.type?"DataTable":"Array",n&&a!=util.getType(n))throw new Error('Type of parameter "data" ('+util.getType(n)+") does not correspond with specified options.type ("+i.type+")");if("DataTable"==a&&!util.isDataTable(n))throw new Error('Parameter "data" must be a DataTable when options.type is "DataTable"')}else a=n&&"DataTable"==util.getType(n)?"DataTable":"Array";void 0!=i&&void 0!=i.showInternalIds&&(this.showInternalIds=i.showInternalIds);var h,u,l,p,d=i&&i.convert||this.options.convert,c=i&&i.filter,m=[];if(void 0!=t)h=r._getItem(t,d),c&&!c(h)&&(h=null);else if(void 0!=e)for(l=0,p=e.length;p>l;l++)h=r._getItem(e[l],d),(!c||c(h))&&m.push(h);else for(u in this.data)this.data.hasOwnProperty(u)&&(h=r._getItem(u,d),(!c||c(h))&&m.push(h));if(this.showInternalIds=s,i&&i.order&&void 0==t&&this._sort(m,i.order),i&&i.fields){var f=i.fields;if(void 0!=t)h=this._filterFields(h,f);else for(l=0,p=m.length;p>l;l++)m[l]=this._filterFields(m[l],f)}if("DataTable"==a){var g=this._getColumnNames(n);if(void 0!=t)r._appendRow(n,g,h);else for(l=0,p=m.length;p>l;l++)r._appendRow(n,g,m[l]);return n}if(void 0!=t)return h;if(n){for(l=0,p=m.length;p>l;l++)n.push(m[l]);return n}return m},DataSet.prototype.getIds=function(t){var e,i,n,r,s,o=this.data,a=t&&t.filter,h=t&&t.order,u=t&&t.convert||this.options.convert,l=[];if(a)if(h){s=[];for(n in o)o.hasOwnProperty(n)&&(r=this._getItem(n,u),a(r)&&s.push(r));for(this._sort(s,h),e=0,i=s.length;i>e;e++)l[e]=s[e][this.fieldId]}else for(n in o)o.hasOwnProperty(n)&&(r=this._getItem(n,u),a(r)&&l.push(r[this.fieldId]));else if(h){s=[];for(n in o)o.hasOwnProperty(n)&&s.push(o[n]);for(this._sort(s,h),e=0,i=s.length;i>e;e++)l[e]=s[e][this.fieldId]}else for(n in o)o.hasOwnProperty(n)&&(r=o[n],l.push(r[this.fieldId]));return l},DataSet.prototype.forEach=function(t,e){var i,n,r=e&&e.filter,s=e&&e.convert||this.options.convert,o=this.data;if(e&&e.order)for(var a=this.get(e),h=0,u=a.length;u>h;h++)i=a[h],n=i[this.fieldId],t(i,n);else for(n in o)o.hasOwnProperty(n)&&(i=this._getItem(n,s),(!r||r(i))&&t(i,n))},DataSet.prototype.map=function(t,e){var i,n=e&&e.filter,r=e&&e.convert||this.options.convert,s=[],o=this.data;for(var a in o)o.hasOwnProperty(a)&&(i=this._getItem(a,r),(!n||n(i))&&s.push(t(i,a)));return e&&e.order&&this._sort(s,e.order),s},DataSet.prototype._filterFields=function(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&-1!=e.indexOf(n)&&(i[n]=t[n]);return i},DataSet.prototype._sort=function(t,e){if(util.isString(e)){var i=e;t.sort(function(t,e){var n=t[i],r=e[i];return n>r?1:r>n?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}},DataSet.prototype.remove=function(t,e){var i,n,r,s=[];if(t instanceof Array)for(i=0,n=t.length;n>i;i++)r=this._remove(t[i]),null!=r&&s.push(r);else r=this._remove(t),null!=r&&s.push(r);return s.length&&this._trigger("remove",{items:s},e),s},DataSet.prototype._remove=function(t){if(util.isNumber(t)||util.isString(t)){if(this.data[t])return delete this.data[t],delete this.internalIds[t],t}else if(t instanceof Object){var e=t[this.fieldId];if(e&&this.data[e])return delete this.data[e],delete this.internalIds[e],e}return null},DataSet.prototype.clear=function(t){var e=Object.keys(this.data);return this.data={},this.internalIds={},this._trigger("remove",{items:e},t),e},DataSet.prototype.max=function(t){var e=this.data,i=null,n=null;for(var r in e)if(e.hasOwnProperty(r)){var s=e[r],o=s[t];null!=o&&(!i||o>n)&&(i=s,n=o)}return i},DataSet.prototype.min=function(t){var e=this.data,i=null,n=null;for(var r in e)if(e.hasOwnProperty(r)){var s=e[r],o=s[t];null!=o&&(!i||n>o)&&(i=s,n=o)}return i},DataSet.prototype.distinct=function(t){var e=this.data,i=[],n=this.options.convert[t],r=0;for(var s in e)if(e.hasOwnProperty(s)){for(var o=e[s],a=util.convert(o[t],n),h=!1,u=0;r>u;u++)if(i[u]==a){h=!0;break}h||void 0===a||(i[r]=a,r++)}return i},DataSet.prototype._addItem=function(t){var e=t[this.fieldId];if(void 0!=e){if(this.data[e])throw new Error("Cannot add item: item with id "+e+" already exists")}else e=util.randomUUID(),t[this.fieldId]=e,this.internalIds[e]=t;var i={};for(var n in t)if(t.hasOwnProperty(n)){var r=this.convert[n];i[n]=util.convert(t[n],r)}return this.data[e]=i,e},DataSet.prototype._getItem=function(t,e){var i,n,r=this.data[t];if(!r)return null;var s={},o=this.fieldId,a=this.internalIds;if(e)for(i in r)r.hasOwnProperty(i)&&(n=r[i],i==o&&n in a&&!this.showInternalIds||(s[i]=util.convert(n,e[i])));else for(i in r)r.hasOwnProperty(i)&&(n=r[i],i==o&&n in a&&!this.showInternalIds||(s[i]=n));return s},DataSet.prototype._updateItem=function(t){var e=t[this.fieldId];if(void 0==e)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");var i=this.data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var n in t)if(t.hasOwnProperty(n)){var r=this.convert[n];i[n]=util.convert(t[n],r)}return e},DataSet.prototype.isInternalId=function(t){return t in this.internalIds},DataSet.prototype._getColumnNames=function(t){for(var e=[],i=0,n=t.getNumberOfColumns();n>i;i++)e[i]=t.getColumnId(i)||t.getColumnLabel(i);return e},DataSet.prototype._appendRow=function(t,e,i){for(var n=t.addRow(),r=0,s=e.length;s>r;r++){var o=e[r];t.setValue(n,r,i[o])}},DataView.prototype.setData=function(t){var e,i,n;if(this.data){this.data.unsubscribe&&this.data.unsubscribe("*",this.listener),e=[];for(var r in this.ids)this.ids.hasOwnProperty(r)&&e.push(r);this.ids={},this._trigger("remove",{items:e})}if(this.data=t,this.data){for(this.fieldId=this.options.fieldId||this.data&&this.data.options&&this.data.options.fieldId||"id",e=this.data.getIds({filter:this.options&&this.options.filter}),i=0,n=e.length;n>i;i++)r=e[i],this.ids[r]=!0;this._trigger("add",{items:e}),this.data.on&&this.data.on("*",this.listener)}},DataView.prototype.get=function(){var t,e,i,n=this,r=util.getType(arguments[0]);"String"==r||"Number"==r||"Array"==r?(t=arguments[0],e=arguments[1],i=arguments[2]):(e=arguments[0],i=arguments[1]);var s=util.extend({},this.options,e);this.options.filter&&e&&e.filter&&(s.filter=function(t){return n.options.filter(t)&&e.filter(t)});var o=[];return void 0!=t&&o.push(t),o.push(s),o.push(i),this.data&&this.data.get.apply(this.data,o)},DataView.prototype.getIds=function(t){var e;if(this.data){var i,n=this.options.filter;i=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,e=this.data.getIds({filter:i,order:t&&t.order})}else e=[];return e},DataView.prototype._onEvent=function(t,e,i){var n,r,s,o,a=e&&e.items,h=this.data,u=[],l=[],p=[];if(a&&h){switch(t){case"add":for(n=0,r=a.length;r>n;n++)s=a[n],o=this.get(s),o&&(this.ids[s]=!0,u.push(s));break;case"update":for(n=0,r=a.length;r>n;n++)s=a[n],o=this.get(s),o?this.ids[s]?l.push(s):(this.ids[s]=!0,u.push(s)):this.ids[s]&&(delete this.ids[s],p.push(s));break;case"remove":for(n=0,r=a.length;r>n;n++)s=a[n],this.ids[s]&&(delete this.ids[s],p.push(s))}u.length&&this._trigger("add",{items:u},i),l.length&&this._trigger("update",{items:l},i),p.length&&this._trigger("remove",{items:p},i)}},DataView.prototype.on=DataSet.prototype.on,DataView.prototype.off=DataSet.prototype.off,DataView.prototype._trigger=DataSet.prototype._trigger,DataView.prototype.subscribe=DataView.prototype.on,DataView.prototype.unsubscribe=DataView.prototype.off;var stack={};stack.orderByStart=function(t){t.sort(function(t,e){return t.data.start-e.data.start})},stack.orderByEnd=function(t){t.sort(function(t,e){var i="end"in t.data?t.data.end:t.data.start,n="end"in e.data?e.data.end:e.data.start;return i-n})},stack.stack=function(t,e,i){var n,r;if(i)for(n=0,r=t.length;r>n;n++)t[n].top=null;for(n=0,r=t.length;r>n;n++){var s=t[n];if(null===s.top){s.top=e.axis;do{for(var o=null,a=0,h=t.length;h>a;a++){var u=t[a];if(null!==u.top&&u!==s&&stack.collision(s,u,e.item)){o=u;break}}null!=o&&(s.top=o.top+o.height+e.item)}while(o)}}},stack.nostack=function(t,e){var i,n;for(i=0,n=t.length;n>i;i++)t[i].top=e.axis},stack.collision=function(t,e,i){return t.left-i<e.left+e.width&&t.left+t.width+i>e.left&&t.top-i<e.top+e.height&&t.top+t.height+i>e.top},TimeStep.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8},TimeStep.prototype.setRange=function(t,e,i){if(!(t instanceof Date&&e instanceof Date))throw"No legal start or end date in method setRange";
this._start=void 0!=t?new Date(t.valueOf()):new Date,this._end=void 0!=e?new Date(e.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},TimeStep.prototype.first=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},TimeStep.prototype.roundToMinor=function(){switch(this.scale){case TimeStep.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case TimeStep.SCALE.MONTH:this.current.setDate(1);case TimeStep.SCALE.DAY:case TimeStep.SCALE.WEEKDAY:this.current.setHours(0);case TimeStep.SCALE.HOUR:this.current.setMinutes(0);case TimeStep.SCALE.MINUTE:this.current.setSeconds(0);case TimeStep.SCALE.SECOND:this.current.setMilliseconds(0)}if(1!=this.step)switch(this.scale){case TimeStep.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case TimeStep.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case TimeStep.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case TimeStep.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case TimeStep.SCALE.WEEKDAY:case TimeStep.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case TimeStep.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case TimeStep.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}},TimeStep.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},TimeStep.prototype.next=function(){var t=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case TimeStep.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case TimeStep.SCALE.SECOND:this.current=new Date(this.current.valueOf()+1e3*this.step);break;case TimeStep.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+1e3*this.step*60);break;case TimeStep.SCALE.HOUR:this.current=new Date(this.current.valueOf()+1e3*this.step*60*60);var e=this.current.getHours();this.current.setHours(e-e%this.step);break;case TimeStep.SCALE.WEEKDAY:case TimeStep.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case TimeStep.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case TimeStep.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case TimeStep.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case TimeStep.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case TimeStep.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case TimeStep.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case TimeStep.SCALE.WEEKDAY:case TimeStep.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case TimeStep.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case TimeStep.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case TimeStep.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case TimeStep.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case TimeStep.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case TimeStep.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case TimeStep.SCALE.WEEKDAY:case TimeStep.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case TimeStep.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0);break;case TimeStep.SCALE.YEAR:}this.current.valueOf()==t&&(this.current=new Date(this._end.valueOf()))},TimeStep.prototype.getCurrent=function(){return this.current},TimeStep.prototype.setScale=function(t,e){this.scale=t,e>0&&(this.step=e),this.autoScale=!1},TimeStep.prototype.setAutoScale=function(t){this.autoScale=t},TimeStep.prototype.setMinimumStep=function(t){if(void 0!=t){var e=31104e6,i=2592e6,n=864e5,r=36e5,s=6e4,o=1e3,a=1;1e3*e>t&&(this.scale=TimeStep.SCALE.YEAR,this.step=1e3),500*e>t&&(this.scale=TimeStep.SCALE.YEAR,this.step=500),100*e>t&&(this.scale=TimeStep.SCALE.YEAR,this.step=100),50*e>t&&(this.scale=TimeStep.SCALE.YEAR,this.step=50),10*e>t&&(this.scale=TimeStep.SCALE.YEAR,this.step=10),5*e>t&&(this.scale=TimeStep.SCALE.YEAR,this.step=5),e>t&&(this.scale=TimeStep.SCALE.YEAR,this.step=1),3*i>t&&(this.scale=TimeStep.SCALE.MONTH,this.step=3),i>t&&(this.scale=TimeStep.SCALE.MONTH,this.step=1),5*n>t&&(this.scale=TimeStep.SCALE.DAY,this.step=5),2*n>t&&(this.scale=TimeStep.SCALE.DAY,this.step=2),n>t&&(this.scale=TimeStep.SCALE.DAY,this.step=1),n/2>t&&(this.scale=TimeStep.SCALE.WEEKDAY,this.step=1),4*r>t&&(this.scale=TimeStep.SCALE.HOUR,this.step=4),r>t&&(this.scale=TimeStep.SCALE.HOUR,this.step=1),15*s>t&&(this.scale=TimeStep.SCALE.MINUTE,this.step=15),10*s>t&&(this.scale=TimeStep.SCALE.MINUTE,this.step=10),5*s>t&&(this.scale=TimeStep.SCALE.MINUTE,this.step=5),s>t&&(this.scale=TimeStep.SCALE.MINUTE,this.step=1),15*o>t&&(this.scale=TimeStep.SCALE.SECOND,this.step=15),10*o>t&&(this.scale=TimeStep.SCALE.SECOND,this.step=10),5*o>t&&(this.scale=TimeStep.SCALE.SECOND,this.step=5),o>t&&(this.scale=TimeStep.SCALE.SECOND,this.step=1),200*a>t&&(this.scale=TimeStep.SCALE.MILLISECOND,this.step=200),100*a>t&&(this.scale=TimeStep.SCALE.MILLISECOND,this.step=100),50*a>t&&(this.scale=TimeStep.SCALE.MILLISECOND,this.step=50),10*a>t&&(this.scale=TimeStep.SCALE.MILLISECOND,this.step=10),5*a>t&&(this.scale=TimeStep.SCALE.MILLISECOND,this.step=5),a>t&&(this.scale=TimeStep.SCALE.MILLISECOND,this.step=1)}},TimeStep.prototype.snap=function(t){var e=new Date(t.valueOf());if(this.scale==TimeStep.SCALE.YEAR){var i=e.getFullYear()+Math.round(e.getMonth()/12);e.setFullYear(Math.round(i/this.step)*this.step),e.setMonth(0),e.setDate(0),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==TimeStep.SCALE.MONTH)e.getDate()>15?(e.setDate(1),e.setMonth(e.getMonth()+1)):e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);else if(this.scale==TimeStep.SCALE.DAY){switch(this.step){case 5:case 2:e.setHours(24*Math.round(e.getHours()/24));break;default:e.setHours(12*Math.round(e.getHours()/12))}e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==TimeStep.SCALE.WEEKDAY){switch(this.step){case 5:case 2:e.setHours(12*Math.round(e.getHours()/12));break;default:e.setHours(6*Math.round(e.getHours()/6))}e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==TimeStep.SCALE.HOUR){switch(this.step){case 4:e.setMinutes(60*Math.round(e.getMinutes()/60));break;default:e.setMinutes(30*Math.round(e.getMinutes()/30))}e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==TimeStep.SCALE.MINUTE){switch(this.step){case 15:case 10:e.setMinutes(5*Math.round(e.getMinutes()/5)),e.setSeconds(0);break;case 5:e.setSeconds(60*Math.round(e.getSeconds()/60));break;default:e.setSeconds(30*Math.round(e.getSeconds()/30))}e.setMilliseconds(0)}else if(this.scale==TimeStep.SCALE.SECOND)switch(this.step){case 15:case 10:e.setSeconds(5*Math.round(e.getSeconds()/5)),e.setMilliseconds(0);break;case 5:e.setMilliseconds(1e3*Math.round(e.getMilliseconds()/1e3));break;default:e.setMilliseconds(500*Math.round(e.getMilliseconds()/500))}else if(this.scale==TimeStep.SCALE.MILLISECOND){var n=this.step>5?this.step/2:1;e.setMilliseconds(Math.round(e.getMilliseconds()/n)*n)}return e},TimeStep.prototype.isMajor=function(){switch(this.scale){case TimeStep.SCALE.MILLISECOND:return 0==this.current.getMilliseconds();case TimeStep.SCALE.SECOND:return 0==this.current.getSeconds();case TimeStep.SCALE.MINUTE:return 0==this.current.getHours()&&0==this.current.getMinutes();case TimeStep.SCALE.HOUR:return 0==this.current.getHours();case TimeStep.SCALE.WEEKDAY:case TimeStep.SCALE.DAY:return 1==this.current.getDate();case TimeStep.SCALE.MONTH:return 0==this.current.getMonth();case TimeStep.SCALE.YEAR:return!1;default:return!1}},TimeStep.prototype.getLabelMinor=function(t){switch(void 0==t&&(t=this.current),this.scale){case TimeStep.SCALE.MILLISECOND:return moment(t).format("SSS");case TimeStep.SCALE.SECOND:return moment(t).format("s");case TimeStep.SCALE.MINUTE:return moment(t).format("HH:mm");case TimeStep.SCALE.HOUR:return moment(t).format("HH:mm");case TimeStep.SCALE.WEEKDAY:return moment(t).format("ddd D");case TimeStep.SCALE.DAY:return moment(t).format("D");case TimeStep.SCALE.MONTH:return moment(t).format("MMM");case TimeStep.SCALE.YEAR:return moment(t).format("YYYY");default:return""}},TimeStep.prototype.getLabelMajor=function(t){switch(void 0==t&&(t=this.current),this.scale){case TimeStep.SCALE.MILLISECOND:return moment(t).format("HH:mm:ss");case TimeStep.SCALE.SECOND:return moment(t).format("D MMMM HH:mm");case TimeStep.SCALE.MINUTE:case TimeStep.SCALE.HOUR:return moment(t).format("ddd D MMMM");case TimeStep.SCALE.WEEKDAY:case TimeStep.SCALE.DAY:return moment(t).format("MMMM YYYY");case TimeStep.SCALE.MONTH:return moment(t).format("YYYY");case TimeStep.SCALE.YEAR:return"";default:return""}},Emitter(Range.prototype),Range.prototype.setOptions=function(t){util.extend(this.options,t),null!==this.start&&null!==this.end&&this.setRange(this.start,this.end)},Range.prototype.setRange=function(t,e){var i=this._applyRange(t,e);if(i){var n={start:new Date(this.start),end:new Date(this.end)};this.emit("rangechange",n),this.emit("rangechanged",n)}},Range.prototype._applyRange=function(t,e){var i,n=null!=t?util.convert(t,"Date").valueOf():this.start,r=null!=e?util.convert(e,"Date").valueOf():this.end,s=null!=this.options.max?util.convert(this.options.max,"Date").valueOf():null,o=null!=this.options.min?util.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'+t+'"');if(isNaN(r)||null===r)throw new Error('Invalid end "'+e+'"');if(n>r&&(r=n),null!==o&&o>n&&(i=o-n,n+=i,r+=i,null!=s&&r>s&&(r=s)),null!==s&&r>s&&(i=r-s,n-=i,r-=i,null!=o&&o>n&&(n=o)),null!==this.options.zoomMin){var a=parseFloat(this.options.zoomMin);0>a&&(a=0),a>r-n&&(this.end-this.start===a?(n=this.start,r=this.end):(i=a-(r-n),n-=i/2,r+=i/2))}if(null!==this.options.zoomMax){var h=parseFloat(this.options.zoomMax);0>h&&(h=0),r-n>h&&(this.end-this.start===h?(n=this.start,r=this.end):(i=r-n-h,n+=i/2,r-=i/2))}var u=this.start!=n||this.end!=r;return this.start=n,this.end=r,u},Range.prototype.getRange=function(){return{start:this.start,end:this.end}},Range.prototype.conversion=function(t){return Range.conversion(this.start,this.end,t)},Range.conversion=function(t,e,i){return 0!=i&&e-t!=0?{offset:t,scale:i/(e-t)}:{offset:0,scale:1}};var touchParams={};Range.prototype._onDragStart=function(){if(!touchParams.ignore){touchParams.start=this.start,touchParams.end=this.end;var t=this.parent.frame;t&&(t.style.cursor="move")}},Range.prototype._onDrag=function(t){var e=this.options.direction;if(validateDirection(e),!touchParams.ignore){var i="horizontal"==e?t.gesture.deltaX:t.gesture.deltaY,n=touchParams.end-touchParams.start,r="horizontal"==e?this.parent.width:this.parent.height,s=-i/r*n;this._applyRange(touchParams.start+s,touchParams.end+s),this.emit("rangechange",{start:new Date(this.start),end:new Date(this.end)})}},Range.prototype._onDragEnd=function(){touchParams.ignore||(this.parent.frame&&(this.parent.frame.style.cursor="auto"),this.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end)}))},Range.prototype._onMouseWheel=function(t){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i;i=0>e?1-e/5:1/(1+e/5);var n=util.fakeGesture(this,t),r=getPointer(n.center,this.parent.frame),s=this._pointerToDate(r);this.zoom(i,s)}t.preventDefault()},Range.prototype._onTouch=function(t){touchParams.start=this.start,touchParams.end=this.end,touchParams.ignore=!1,touchParams.center=null;var e=ItemSet.itemFromTarget(t);e&&e.selected&&this.options.editable&&(touchParams.ignore=!0)},Range.prototype._onHold=function(){touchParams.ignore=!0},Range.prototype._onPinch=function(t){this.options.direction;if(touchParams.ignore=!0,t.gesture.touches.length>1){touchParams.center||(touchParams.center=getPointer(t.gesture.center,this.parent.frame));var e=1/t.gesture.scale,i=this._pointerToDate(touchParams.center),n=getPointer(t.gesture.center,this.parent.frame),r=(this._pointerToDate(this.parent,n),parseInt(i+(touchParams.start-i)*e)),s=parseInt(i+(touchParams.end-i)*e);this.setRange(r,s)}},Range.prototype._pointerToDate=function(t){var e,i=this.options.direction;if(validateDirection(i),"horizontal"==i){var n=this.parent.width;return e=this.conversion(n),t.x/e.scale+e.offset}var r=this.parent.height;return e=this.conversion(r),t.y/e.scale+e.offset},Range.prototype.zoom=function(t,e){null==e&&(e=(this.start+this.end)/2);var i=e+(this.start-e)*t,n=e+(this.end-e)*t;this.setRange(i,n)},Range.prototype.move=function(t){var e=this.end-this.start,i=this.start+e*t,n=this.end+e*t;this.start=i,this.end=n},Range.prototype.moveTo=function(t){var e=(this.start+this.end)/2,i=e-t,n=this.start-i,r=this.end-i;this.setRange(n,r)},Emitter(Component.prototype),Component.prototype.setOptions=function(t){t&&(util.extend(this.options,t),this.repaint())},Component.prototype.getOption=function(t){var e;return this.options&&(e=this.options[t]),void 0===e&&this.defaultOptions&&(e=this.defaultOptions[t]),e},Component.prototype.getFrame=function(){return null},Component.prototype.repaint=function(){return!1},Component.prototype._isResized=function(){var t=this._previousWidth!==this.width||this._previousHeight!==this.height;return this._previousWidth=this.width,this._previousHeight=this.height,t},Panel.prototype=new Component,Panel.prototype.setOptions=Component.prototype.setOptions,Panel.prototype.getFrame=function(){return this.frame},Panel.prototype.appendChild=function(t){this.childs.push(t),t.parent=this;var e=t.getFrame();e&&(e.parentNode&&e.parentNode.removeChild(e),this.frame.appendChild(e))},Panel.prototype.insertBefore=function(t,e){var i=this.childs.indexOf(e);if(-1!=i){this.childs.splice(i,0,t),t.parent=this;var n=t.getFrame();if(n){n.parentNode&&n.parentNode.removeChild(n);var r=e.getFrame();r?this.frame.insertBefore(n,r):this.frame.appendChild(n)}}},Panel.prototype.removeChild=function(t){var e=this.childs.indexOf(t);if(-1!=e){this.childs.splice(e,1),t.parent=null;var i=t.getFrame();i&&i.parentNode&&this.frame.removeChild(i)}},Panel.prototype.hasChild=function(t){var e=this.childs.indexOf(t);return-1!=e},Panel.prototype.repaint=function(){var t=util.option.asString,e=this.options,i=this.getFrame();i.className="vpanel"+(e.className?" "+t(e.className):"");var n=this._repaintChilds();return this._updateSize(),this._isResized()||n},Panel.prototype._repaintChilds=function(){for(var t=!1,e=0,i=this.childs.length;i>e;e++)t=this.childs[e].repaint()||t;return t},Panel.prototype._updateSize=function(){this.frame.style.top=util.option.asSize(this.options.top),this.frame.style.bottom=util.option.asSize(this.options.bottom),this.frame.style.left=util.option.asSize(this.options.left),this.frame.style.right=util.option.asSize(this.options.right),this.frame.style.width=util.option.asSize(this.options.width,"100%"),this.frame.style.height=util.option.asSize(this.options.height,""),this.top=this.frame.offsetTop,this.left=this.frame.offsetLeft,this.width=this.frame.offsetWidth,this.height=this.frame.offsetHeight},RootPanel.prototype=new Panel,RootPanel.prototype._create=function(){this.frame=document.createElement("div"),this.hammer=Hammer(this.frame,{prevent_default:!0}),this.listeners={};var t=this,e=["touch","pinch","tap","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];e.forEach(function(e){var i=function(){var i=[e].concat(Array.prototype.slice.call(arguments,0));t.emit.apply(t,i)};t.hammer.on(e,i),t.listeners[e]=i})},RootPanel.prototype.setOptions=function(t){t&&(util.extend(this.options,t),this.repaint(),this._initWatch())},RootPanel.prototype.getFrame=function(){return this.frame},RootPanel.prototype.repaint=function(){var t=this.options,e=t.editable.updateTime||t.editable.updateGroup,i="vis timeline rootpanel "+t.orientation+(e?" editable":"");t.className&&(i+=" "+util.option.asString(i)),this.frame.className=i;var n=this._repaintChilds();this.frame.style.maxHeight=util.option.asSize(this.options.maxHeight,""),this.frame.style.minHeight=util.option.asSize(this.options.minHeight,""),this._updateSize();var r=this._isResized()||n;r&&setTimeout(this.repaint.bind(this),0)},RootPanel.prototype._initWatch=function(){var t=this.getOption("autoResize");t?this._watch():this._unwatch()},RootPanel.prototype._watch=function(){var t=this;this._unwatch();var e=function(){var e=t.getOption("autoResize");return e?void(t.frame&&(t.frame.clientWidth!=t.lastWidth||t.frame.clientHeight!=t.lastHeight)&&(t.lastWidth=t.frame.clientWidth,t.lastHeight=t.frame.clientHeight,t.repaint())):void t._unwatch()};util.addEventListener(window,"resize",e),this.watchTimer=setInterval(e,1e3)},RootPanel.prototype._unwatch=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0)},TimeAxis.prototype=new Component,TimeAxis.prototype.setOptions=Component.prototype.setOptions,TimeAxis.prototype._create=function(){this.frame=document.createElement("div")},TimeAxis.prototype.setRange=function(t){if(!(t instanceof Range||t&&t.start&&t.end))throw new TypeError("Range must be an instance of Range, or an object containing start and end.");this.range=t},TimeAxis.prototype.getFrame=function(){return this.frame},TimeAxis.prototype.repaint=function(){var t=util.option.asSize,e=this.options,i=this.props,n=this.frame;n.className="timeaxis";var r=n.parentNode;if(r){this._calculateCharSize();var s=this.getOption("orientation"),o=this.getOption("showMinorLabels"),a=this.getOption("showMajorLabels"),h=this.parent.height;i.minorLabelHeight=o?i.minorCharHeight:0,i.majorLabelHeight=a?i.majorCharHeight:0,this.height=i.minorLabelHeight+i.majorLabelHeight,this.width=n.offsetWidth,i.minorLineHeight=h+i.minorLabelHeight,i.minorLineWidth=1,i.majorLineHeight=h+this.height,i.majorLineWidth=1;var u=n.nextSibling;r.removeChild(n),"top"==s?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width=t(e.width,"100%"),n.style.height=this.height+"px"):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width=t(e.width,"100%"),n.style.height=this.height+"px"),this._repaintLabels(),this._repaintLine(),u?r.insertBefore(n,u):r.appendChild(n)}return this._isResized()},TimeAxis.prototype._repaintLabels=function(){var t=this.getOption("orientation"),e=util.convert(this.range.start,"Number"),i=util.convert(this.range.end,"Number"),n=this.options.toTime(7*(this.props.minorCharWidth||10)).valueOf()-this.options.toTime(0).valueOf(),r=new TimeStep(new Date(e),new Date(i),n);this.step=r;var s=this.dom;s.redundant.majorLines=s.majorLines,s.redundant.majorTexts=s.majorTexts,s.redundant.minorLines=s.minorLines,s.redundant.minorTexts=s.minorTexts,s.majorLines=[],s.majorTexts=[],s.minorLines=[],s.minorTexts=[],r.first();for(var o=void 0,a=0;r.hasNext()&&1e3>a;){a++;var h=r.getCurrent(),u=this.options.toScreen(h),l=r.isMajor();this.getOption("showMinorLabels")&&this._repaintMinorText(u,r.getLabelMinor(),t),l&&this.getOption("showMajorLabels")?(u>0&&(void 0==o&&(o=u),this._repaintMajorText(u,r.getLabelMajor(),t)),this._repaintMajorLine(u,t)):this._repaintMinorLine(u,t),r.next()}if(this.getOption("showMajorLabels")){var p=this.options.toTime(0),d=r.getLabelMajor(p),c=d.length*(this.props.majorCharWidth||10)+10;(void 0==o||o>c)&&this._repaintMajorText(0,d,t)}util.forEach(this.dom.redundant,function(t){for(;t.length;){var e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})},TimeAxis.prototype._repaintMinorText=function(t,e,i){var n=this.dom.redundant.minorTexts.shift();if(!n){var r=document.createTextNode("");n=document.createElement("div"),n.appendChild(r),n.className="text minor",this.frame.appendChild(n)}this.dom.minorTexts.push(n),n.childNodes[0].nodeValue=e,"top"==i?(n.style.top=this.props.majorLabelHeight+"px",n.style.bottom=""):(n.style.top="",n.style.bottom=this.props.majorLabelHeight+"px"),n.style.left=t+"px"},TimeAxis.prototype._repaintMajorText=function(t,e,i){var n=this.dom.redundant.majorTexts.shift();if(!n){var r=document.createTextNode(e);n=document.createElement("div"),n.className="text major",n.appendChild(r),this.frame.appendChild(n)}this.dom.majorTexts.push(n),n.childNodes[0].nodeValue=e,"top"==i?(n.style.top="0px",n.style.bottom=""):(n.style.top="",n.style.bottom="0px"),n.style.left=t+"px"},TimeAxis.prototype._repaintMinorLine=function(t,e){var i=this.dom.redundant.minorLines.shift();i||(i=document.createElement("div"),i.className="grid vertical minor",this.frame.appendChild(i)),this.dom.minorLines.push(i);var n=this.props;"top"==e?(i.style.top=this.props.majorLabelHeight+"px",i.style.bottom=""):(i.style.top="",i.style.bottom=this.props.majorLabelHeight+"px"),i.style.height=n.minorLineHeight+"px",i.style.left=t-n.minorLineWidth/2+"px"},TimeAxis.prototype._repaintMajorLine=function(t,e){var i=this.dom.redundant.majorLines.shift();i||(i=document.createElement("DIV"),i.className="grid vertical major",this.frame.appendChild(i)),this.dom.majorLines.push(i);var n=this.props;"top"==e?(i.style.top="0px",i.style.bottom=""):(i.style.top="",i.style.bottom="0px"),i.style.left=t-n.majorLineWidth/2+"px",i.style.height=n.majorLineHeight+"px"},TimeAxis.prototype._repaintLine=function(){var t=this.dom.line,e=this.frame,i=this.getOption("orientation");this.getOption("showMinorLabels")||this.getOption("showMajorLabels")?(t?(e.removeChild(t),e.appendChild(t)):(t=document.createElement("div"),t.className="grid horizontal major",e.appendChild(t),this.dom.line=t),"top"==i?(t.style.top=this.height+"px",t.style.bottom=""):(t.style.top="",t.style.bottom=this.height+"px")):t&&t.parentNode&&(t.parentNode.removeChild(t),delete this.dom.line)},TimeAxis.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="text minor measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.frame.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="text minor measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.frame.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth},TimeAxis.prototype.snap=function(t){return this.step.snap(t)},CurrentTime.prototype=new Component,CurrentTime.prototype.setOptions=Component.prototype.setOptions,CurrentTime.prototype._create=function(){var t=document.createElement("div");t.className="currenttime",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t},CurrentTime.prototype.getFrame=function(){return this.bar},CurrentTime.prototype.repaint=function(){var t=(this.parent,new Date),e=this.options.toScreen(t);return this.bar.style.left=e+"px",this.bar.title="Current time: "+t,!1},CurrentTime.prototype.start=function(){function t(){e.stop();var i=e.range.conversion(e.parent.width).scale,n=1/i/10;30>n&&(n=30),n>1e3&&(n=1e3),e.repaint(),e.currentTimeTimer=setTimeout(t,n)}var e=this;t()},CurrentTime.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},CustomTime.prototype=new Component,CustomTime.prototype.setOptions=Component.prototype.setOptions,CustomTime.prototype._create=function(){var t=document.createElement("div");t.className="customtime",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t;var e=document.createElement("div");e.style.position="relative",e.style.top="0px",e.style.left="-10px",e.style.height="100%",e.style.width="20px",t.appendChild(e),this.hammer=Hammer(t,{prevent_default:!0}),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this))},CustomTime.prototype.getFrame=function(){return this.bar},CustomTime.prototype.repaint=function(){var t=this.options.toScreen(this.customTime);return this.bar.style.left=t+"px",this.bar.title="Time: "+this.customTime,!1},CustomTime.prototype.setCustomTime=function(t){this.customTime=new Date(t.valueOf()),this.repaint()},CustomTime.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},CustomTime.prototype._onDragStart=function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation(),t.preventDefault()},CustomTime.prototype._onDrag=function(t){if(this.eventParams.dragging){var e=t.gesture.deltaX,i=this.options.toScreen(this.eventParams.customTime)+e,n=this.options.toTime(i);this.setCustomTime(n),this.emit("timechange",{time:new Date(this.customTime.valueOf())}),t.stopPropagation(),t.preventDefault()}},CustomTime.prototype._onDragEnd=function(t){this.eventParams.dragging&&(this.emit("timechanged",{time:new Date(this.customTime.valueOf())}),t.stopPropagation(),t.preventDefault())};var UNGROUPED="__ungrouped__";ItemSet.prototype=new Panel,ItemSet.types={box:ItemBox,range:ItemRange,rangeoverflow:ItemRangeOverflow,point:ItemPoint},ItemSet.prototype._create=function(){var t=document.createElement("div");t["timeline-itemset"]=this,this.frame=t;var e=document.createElement("div");e.className="background",this.backgroundPanel.frame.appendChild(e),this.dom.background=e;var i=document.createElement("div");i.className="foreground",t.appendChild(i),this.dom.foreground=i;var n=document.createElement("div");n.className="axis",this.dom.axis=n,this.axisPanel.frame.appendChild(n);var r=document.createElement("div");r.className="labelset",this.dom.labelSet=r,this.sidePanel.frame.appendChild(r),this._updateUngrouped(),this.hammer=Hammer(t,{prevent_default:!0}),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this))},ItemSet.prototype.setOptions=function(t){Component.prototype.setOptions.call(this,t)},ItemSet.prototype.markDirty=function(){this.groupIds=[],this.stackDirty=!0},ItemSet.prototype.hide=function(){this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},ItemSet.prototype.show=function(){this.dom.axis.parentNode||this.axisPanel.frame.appendChild(this.dom.axis),this.dom.background.parentNode||this.backgroundPanel.frame.appendChild(this.dom.background),this.dom.labelSet.parentNode||this.sidePanel.frame.appendChild(this.dom.labelSet)},ItemSet.prototype.setRange=function(t){if(!(t instanceof Range||t&&t.start&&t.end))throw new TypeError("Range must be an instance of Range, or an object containing start and end.");this.range=t},ItemSet.prototype.setSelection=function(t){var e,i,n,r;if(t){if(!Array.isArray(t))throw new TypeError("Array expected");for(e=0,i=this.selection.length;i>e;e++)n=this.selection[e],r=this.items[n],r&&r.unselect();for(this.selection=[],e=0,i=t.length;i>e;e++)n=t[e],r=this.items[n],r&&(this.selection.push(n),r.select())}},ItemSet.prototype.getSelection=function(){return this.selection.concat([])},ItemSet.prototype._deselect=function(t){for(var e=this.selection,i=0,n=e.length;n>i;i++)if(e[i]==t){e.splice(i,1);break}},ItemSet.prototype.getFrame=function(){return this.frame},ItemSet.prototype.repaint=function(){var t=this.options.margin,e=this.range,i=util.option.asSize,n=util.option.asString,r=this.options,s=this.getOption("orientation"),o=!1,a=this.frame;"number"==typeof t&&(t={item:t,axis:t}),a.className="itemset"+(r.className?" "+n(r.className):""),o=this._orderGroups()||o;var h=this.range.end-this.range.start,u=h!=this.lastVisibleInterval||this.width!=this.lastWidth;u&&(this.stackDirty=!0),this.lastVisibleInterval=h,this.lastWidth=this.width;var l=this.stackDirty,p=this._firstGroup(),d={item:t.item,axis:t.axis},c={item:t.item,axis:t.item/2},m=0,f=t.axis+t.item;return util.forEach(this.groups,function(t){var i=t==p?d:c;o=t.repaint(e,i,l)||o,m+=t.height}),m=Math.max(m,f),this.stackDirty=!1,a.style.left=i(r.left,""),a.style.right=i(r.right,""),a.style.top=i("top"==s?"0":""),a.style.bottom=i("top"==s?"":"0"),a.style.width=i(r.width,"100%"),a.style.height=i(m),this.top=a.offsetTop,this.left=a.offsetLeft,this.width=a.offsetWidth,this.height=m,this.dom.axis.style.left=i(r.left,"0"),this.dom.axis.style.right=i(r.right,""),this.dom.axis.style.width=i(r.width,"100%"),this.dom.axis.style.height=i(0),this.dom.axis.style.top=i("top"==s?"0":""),this.dom.axis.style.bottom=i("top"==s?"":"0"),o=this._isResized()||o},ItemSet.prototype._firstGroup=function(){var t="top"==this.options.orientation?0:this.groupIds.length-1,e=this.groupIds[t],i=this.groups[e]||this.groups[UNGROUPED];return i||null},ItemSet.prototype._updateUngrouped=function(){var t=this.groups[UNGROUPED];if(this.groupsData)t&&(t.hide(),delete this.groups[UNGROUPED]);else if(!t){var e=null,i=null;t=new Group(e,i,this),this.groups[UNGROUPED]=t;for(var n in this.items)this.items.hasOwnProperty(n)&&t.add(this.items[n]);t.show()}},ItemSet.prototype.getForeground=function(){return this.dom.foreground},ItemSet.prototype.getBackground=function(){return this.dom.background},ItemSet.prototype.getAxis=function(){return this.dom.axis},ItemSet.prototype.getLabelSet=function(){return this.dom.labelSet},ItemSet.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof DataSet||t instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(util.forEach(this.itemListeners,function(t,e){n.unsubscribe(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var r=this.id;util.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,r)}),e=this.itemsData.getIds(),this._onAdd(e),this._updateUngrouped()}},ItemSet.prototype.getItems=function(){return this.itemsData},ItemSet.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(util.forEach(this.groupListeners,function(t,e){i.groupsData.unsubscribe(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof DataSet||t instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.id;util.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,n)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._updateUngrouped(),this._order(),this.emit("change")},ItemSet.prototype.getGroups=function(){return this.groupsData},ItemSet.prototype.removeItem=function(t){var e=this.itemsData.get(t),i=this._myDataSet();e&&this.options.onRemove(e,function(e){e&&i.remove(t)})},ItemSet.prototype._onUpdate=function(t){var e=this,i=this.items,n=this.itemOptions;t.forEach(function(t){var r=e.itemsData.get(t),s=i[t],o=r.type||r.start&&r.end&&"range"||e.options.type||"box",a=ItemSet.types[o];if(s&&(a&&s instanceof a?e._updateItem(s,r):(e._removeItem(s),s=null)),!s){if(!a)throw new TypeError('Unknown item type "'+o+'"');s=new a(r,e.options,n),s.id=t,e._addItem(s)
}}),this._order(),this.stackDirty=!0,this.emit("change")},ItemSet.prototype._onAdd=ItemSet.prototype._onUpdate,ItemSet.prototype._onRemove=function(t){var e=0,i=this;t.forEach(function(t){var n=i.items[t];n&&(e++,i._removeItem(n))}),e&&(this._order(),this.stackDirty=!0,this.emit("change"))},ItemSet.prototype._order=function(){util.forEach(this.groups,function(t){t.order()})},ItemSet.prototype._onUpdateGroups=function(t){this._onAddGroups(t)},ItemSet.prototype._onAddGroups=function(t){var e=this;t.forEach(function(t){var i=e.groupsData.get(t),n=e.groups[t];if(n)n.setData(i);else{if(t==UNGROUPED)throw new Error("Illegal group id. "+t+" is a reserved id.");var r=Object.create(e.options);util.extend(r,{height:null}),n=new Group(t,i,e),e.groups[t]=n;for(var s in e.items)if(e.items.hasOwnProperty(s)){var o=e.items[s];o.data.group==t&&n.add(o)}n.order(),n.show()}}),this.emit("change")},ItemSet.prototype._onRemoveGroups=function(t){var e=this.groups;t.forEach(function(t){var i=e[t];i&&(i.hide(),delete e[t])}),this.markDirty(),this.emit("change")},ItemSet.prototype._orderGroups=function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder}),e=!util.equalArray(t,this.groupIds);if(e){var i=this.groups;t.forEach(function(t){i[t].hide()}),t.forEach(function(t){i[t].show()}),this.groupIds=t}return e}return!1},ItemSet.prototype._addItem=function(t){this.items[t.id]=t;var e=this.groupsData?t.data.group:UNGROUPED,i=this.groups[e];i&&i.add(t)},ItemSet.prototype._updateItem=function(t,e){var i=t.data.group;if(t.data=e,t.displayed&&t.repaint(),i!=t.data.group){var n=this.groups[i];n&&n.remove(t);var r=this.groupsData?t.data.group:UNGROUPED,s=this.groups[r];s&&s.add(t)}},ItemSet.prototype._removeItem=function(t){t.hide(),delete this.items[t.id];var e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1);var i=this.groupsData?t.data.group:UNGROUPED,n=this.groups[i];n&&n.remove(t)},ItemSet.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof ItemRange&&e.push(t[i]);return e},ItemSet.prototype.getLabelsWidth=function(){var t=0;return util.forEach(this.groups,function(e){t=Math.max(t,e.getLabelWidth())}),t},ItemSet.prototype.getBackgroundHeight=function(){return this.height},ItemSet.prototype._onDragStart=function(t){if(this.options.editable.updateTime||this.options.editable.updateGroup){var e,i=ItemSet.itemFromTarget(t),n=this;if(i&&i.selected){var r=t.target.dragLeftItem,s=t.target.dragRightItem;r?(e={item:r},n.options.editable.updateTime&&(e.start=i.data.start.valueOf()),n.options.editable.updateGroup&&"group"in i.data&&(e.group=i.data.group),this.touchParams.itemProps=[e]):s?(e={item:s},n.options.editable.updateTime&&(e.end=i.data.end.valueOf()),n.options.editable.updateGroup&&"group"in i.data&&(e.group=i.data.group),this.touchParams.itemProps=[e]):this.touchParams.itemProps=this.getSelection().map(function(t){var e=n.items[t],i={item:e};return n.options.editable.updateTime&&("start"in e.data&&(i.start=e.data.start.valueOf()),"end"in e.data&&(i.end=e.data.end.valueOf())),n.options.editable.updateGroup&&"group"in e.data&&(i.group=e.data.group),i}),t.stopPropagation()}}},ItemSet.prototype._onDrag=function(t){if(this.touchParams.itemProps){var e=this.options.snap||null,i=t.gesture.deltaX,n=this.width/(this.range.end-this.range.start),r=i/n;this.touchParams.itemProps.forEach(function(i){if("start"in i){var n=new Date(i.start+r);i.item.data.start=e?e(n):n}if("end"in i){var s=new Date(i.end+r);i.item.data.end=e?e(s):s}if("group"in i){var o=ItemSet.groupFromTarget(t);if(o&&o.groupId!=i.item.data.group){var a=i.item.parent;a.remove(i.item),a.order(),o.add(i.item),o.order(),i.item.data.group=o.groupId}}}),this.stackDirty=!0,this.emit("change"),t.stopPropagation()}},ItemSet.prototype._onDragEnd=function(t){if(this.touchParams.itemProps){var e=[],i=this,n=this._myDataSet();this.touchParams.itemProps.forEach(function(t){var r=t.item.id,s=i.itemsData.get(r),o=!1;"start"in t.item.data&&(o=t.start!=t.item.data.start.valueOf(),s.start=util.convert(t.item.data.start,n.convert.start)),"end"in t.item.data&&(o=o||t.end!=t.item.data.end.valueOf(),s.end=util.convert(t.item.data.end,n.convert.end)),"group"in t.item.data&&(o=o||t.group!=t.item.data.group,s.group=t.item.data.group),o&&i.options.onMove(s,function(s){s?(s[n.fieldId]=r,e.push(s)):("start"in t&&(t.item.data.start=t.start),"end"in t&&(t.item.data.end=t.end),i.stackDirty=!0,i.emit("change"))})}),this.touchParams.itemProps=null,e.length&&n.update(e),t.stopPropagation()}},ItemSet.itemFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-item"))return e["timeline-item"];e=e.parentNode}return null},ItemSet.groupFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-group"))return e["timeline-group"];e=e.parentNode}return null},ItemSet.itemSetFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-itemset"))return e["timeline-itemset"];e=e.parentNode}return null},ItemSet.prototype._myDataSet=function(){for(var t=this.itemsData;t instanceof DataView;)t=t.data;return t},Item.prototype.select=function(){this.selected=!0,this.displayed&&this.repaint()},Item.prototype.unselect=function(){this.selected=!1,this.displayed&&this.repaint()},Item.prototype.setParent=function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t},Item.prototype.isVisible=function(){return!1},Item.prototype.show=function(){return!1},Item.prototype.hide=function(){return!1},Item.prototype.repaint=function(){},Item.prototype.repositionX=function(){},Item.prototype.repositionY=function(){},Item.prototype._repaintDeleteButton=function(t){if(this.selected&&this.options.editable.remove&&!this.dom.deleteButton){var e=this,i=document.createElement("div");i.className="delete",i.title="Delete this item",Hammer(i,{preventDefault:!0}).on("tap",function(t){e.parent.removeFromDataSet(e),t.stopPropagation()}),t.appendChild(i),this.dom.deleteButton=i}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},ItemBox.prototype=new Item(null),ItemBox.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},ItemBox.prototype.repaint=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("DIV"),t.content=document.createElement("DIV"),t.content.className="content",t.box.appendChild(t.content),t.line=document.createElement("DIV"),t.line.className="line",t.dot=document.createElement("DIV"),t.dot.className="dot",t.box["timeline-item"]=this),!this.parent)throw new Error("Cannot repaint item: no parent attached");if(!t.box.parentNode){var e=this.parent.getForeground();if(!e)throw new Error("Cannot repaint time axis: parent has no foreground container element");e.appendChild(t.box)}if(!t.line.parentNode){var i=this.parent.getBackground();if(!i)throw new Error("Cannot repaint time axis: parent has no background container element");i.appendChild(t.line)}if(!t.dot.parentNode){var n=this.parent.getAxis();if(!i)throw new Error("Cannot repaint time axis: parent has no axis container element");n.appendChild(t.dot)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)t.content.innerHTML="",t.content.appendChild(this.content);else{if(void 0==this.data.content)throw new Error('Property "content" missing in item '+this.data.id);t.content.innerHTML=this.content}this.dirty=!0}var r=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=r&&(this.className=r,t.box.className="item box"+r,t.line.className="item line"+r,t.dot.className="item dot"+r,this.dirty=!0),this.dirty&&(this.props.dot.height=t.dot.offsetHeight,this.props.dot.width=t.dot.offsetWidth,this.props.line.width=t.line.offsetWidth,this.width=t.box.offsetWidth,this.height=t.box.offsetHeight,this.dirty=!1),this._repaintDeleteButton(t.box)},ItemBox.prototype.show=function(){this.displayed||this.repaint()},ItemBox.prototype.hide=function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.top=null,this.left=null,this.displayed=!1}},ItemBox.prototype.repositionX=function(){var t=this.defaultOptions.toScreen(this.data.start),e=this.options.align||this.defaultOptions.align,i=this.dom.box,n=this.dom.line,r=this.dom.dot;this.left="right"==e?t-this.width:"left"==e?t:t-this.width/2,i.style.left=this.left+"px",n.style.left=t-this.props.line.width/2+"px",r.style.left=t-this.props.dot.width/2+"px"},ItemBox.prototype.repositionY=function(){var t=this.options.orientation||this.defaultOptions.orientation,e=this.dom.box,i=this.dom.line,n=this.dom.dot;"top"==t?(e.style.top=(this.top||0)+"px",e.style.bottom="",i.style.top="0",i.style.bottom="",i.style.height=this.parent.top+this.top+1+"px"):(e.style.top="",e.style.bottom=(this.top||0)+"px",i.style.top=this.parent.top+this.parent.height-this.top-1+"px",i.style.bottom="0",i.style.height=""),n.style.top=-this.props.dot.height/2+"px"},ItemPoint.prototype=new Item(null),ItemPoint.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},ItemPoint.prototype.repaint=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.point=document.createElement("div"),t.content=document.createElement("div"),t.content.className="content",t.point.appendChild(t.content),t.dot=document.createElement("div"),t.point.appendChild(t.dot),t.point["timeline-item"]=this),!this.parent)throw new Error("Cannot repaint item: no parent attached");if(!t.point.parentNode){var e=this.parent.getForeground();if(!e)throw new Error("Cannot repaint time axis: parent has no foreground container element");e.appendChild(t.point)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)t.content.innerHTML="",t.content.appendChild(this.content);else{if(void 0==this.data.content)throw new Error('Property "content" missing in item '+this.data.id);t.content.innerHTML=this.content}this.dirty=!0}var i=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=i&&(this.className=i,t.point.className="item point"+i,t.dot.className="item dot"+i,this.dirty=!0),this.dirty&&(this.width=t.point.offsetWidth,this.height=t.point.offsetHeight,this.props.dot.width=t.dot.offsetWidth,this.props.dot.height=t.dot.offsetHeight,this.props.content.height=t.content.offsetHeight,t.content.style.marginLeft=2*this.props.dot.width+"px",t.dot.style.top=(this.height-this.props.dot.height)/2+"px",t.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1),this._repaintDeleteButton(t.point)},ItemPoint.prototype.show=function(){this.displayed||this.repaint()},ItemPoint.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.top=null,this.left=null,this.displayed=!1)},ItemPoint.prototype.repositionX=function(){var t=this.defaultOptions.toScreen(this.data.start);this.left=t-this.props.dot.width,this.dom.point.style.left=this.left+"px"},ItemPoint.prototype.repositionY=function(){var t=this.options.orientation||this.defaultOptions.orientation,e=this.dom.point;"top"==t?(e.style.top=this.top+"px",e.style.bottom=""):(e.style.top="",e.style.bottom=this.top+"px")},ItemRange.prototype=new Item(null),ItemRange.prototype.baseClassName="item range",ItemRange.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},ItemRange.prototype.repaint=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("div"),t.content=document.createElement("div"),t.content.className="content",t.box.appendChild(t.content),t.box["timeline-item"]=this),!this.parent)throw new Error("Cannot repaint item: no parent attached");if(!t.box.parentNode){var e=this.parent.getForeground();if(!e)throw new Error("Cannot repaint time axis: parent has no foreground container element");e.appendChild(t.box)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)t.content.innerHTML="",t.content.appendChild(this.content);else{if(void 0==this.data.content)throw new Error('Property "content" missing in item '+this.data.id);t.content.innerHTML=this.content}this.dirty=!0}var i=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=i&&(this.className=i,t.box.className=this.baseClassName+i,this.dirty=!0),this.dirty&&(this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dirty=!1),this._repaintDeleteButton(t.box),this._repaintDragLeft(),this._repaintDragRight()},ItemRange.prototype.show=function(){this.displayed||this.repaint()},ItemRange.prototype.hide=function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.top=null,this.left=null,this.displayed=!1}},ItemRange.prototype.repositionX=function(){var t,e=this.props,i=this.parent.width,n=this.defaultOptions.toScreen(this.data.start),r=this.defaultOptions.toScreen(this.data.end),s="padding"in this.options?this.options.padding:this.defaultOptions.padding;-i>n&&(n=-i),r>2*i&&(r=2*i),t=0>n?Math.min(-n,r-n-e.content.width-2*s):0,this.left=n,this.width=Math.max(r-n,1),this.dom.box.style.left=this.left+"px",this.dom.box.style.width=this.width+"px",this.dom.content.style.left=t+"px"},ItemRange.prototype.repositionY=function(){var t=this.options.orientation||this.defaultOptions.orientation,e=this.dom.box;"top"==t?(e.style.top=this.top+"px",e.style.bottom=""):(e.style.top="",e.style.bottom=this.top+"px")},ItemRange.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="drag-left",t.dragLeftItem=this,Hammer(t,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(t),this.dom.dragLeft=t}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},ItemRange.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="drag-right",t.dragRightItem=this,Hammer(t,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(t),this.dom.dragRight=t}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},ItemRangeOverflow.prototype=new ItemRange(null),ItemRangeOverflow.prototype.baseClassName="item rangeoverflow",ItemRangeOverflow.prototype.repositionX=function(){{var t,e=this.parent.width,i=this.defaultOptions.toScreen(this.data.start),n=this.defaultOptions.toScreen(this.data.end);"padding"in this.options?this.options.padding:this.defaultOptions.padding}-e>i&&(i=-e),n>2*e&&(n=2*e),t=Math.max(-i,0),this.left=i;var r=Math.max(n-i,1);this.width=r+this.props.content.width,this.dom.box.style.left=this.left+"px",this.dom.box.style.width=r+"px",this.dom.content.style.left=t+"px"},Group.prototype._create=function(){var t=document.createElement("div");t.className="vlabel",this.dom.label=t;var e=document.createElement("div");e.className="inner",t.appendChild(e),this.dom.inner=e;var i=document.createElement("div");i.className="group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.axis=document.createElement("div"),this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},Group.prototype.setData=function(t){var e=t&&t.content;e instanceof Element?this.dom.inner.appendChild(e):this.dom.inner.innerHTML=void 0!=e?e:this.groupId;var i=t&&t.className;i&&util.addClassName(this.dom.label,i)},Group.prototype.getForeground=function(){return this.dom.foreground},Group.prototype.getBackground=function(){return this.dom.background},Group.prototype.getAxis=function(){return this.dom.axis},Group.prototype.getLabelWidth=function(){return this.props.label.width},Group.prototype.repaint=function(t,e,i){var n=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t);var r=this.dom.marker.clientHeight;r!=this.lastMarkerHeight&&(this.lastMarkerHeight=r,util.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.repaint()}),i=!0),this.itemSet.options.stack?stack.stack(this.visibleItems,e,i):stack.nostack(this.visibleItems,e);for(var s=0,o=this.visibleItems.length;o>s;s++){var a=this.visibleItems[s];a.repositionY()}var h,u=this.visibleItems;if(u.length){var l=u[0].top,p=u[0].top+u[0].height;util.forEach(u,function(t){l=Math.min(l,t.top),p=Math.max(p,t.top+t.height)}),h=p-l+e.axis+e.item}else h=e.axis+e.item;h=Math.max(h,this.props.label.height);var d=this.dom.foreground;return this.top=d.offsetTop,this.left=d.offsetLeft,this.width=d.offsetWidth,n=util.updateProperty(this,"height",h)||n,n=util.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||n,n=util.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||n,d.style.height=h+"px",this.dom.label.style.height=h+"px",n},Group.prototype.show=function(){this.dom.label.parentNode||this.itemSet.getLabelSet().appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.getForeground().appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.getBackground().appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.getAxis().appendChild(this.dom.axis)},Group.prototype.hide=function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)},Group.prototype.add=function(t){if(this.items[t.id]=t,t.setParent(this),t instanceof ItemRange&&-1==this.visibleItems.indexOf(t)){var e=this.itemSet.range;this._checkIfVisible(t,this.visibleItems,e)}},Group.prototype.remove=function(t){delete this.items[t.id],t.setParent(this.itemSet);var e=this.visibleItems.indexOf(t);-1!=e&&this.visibleItems.splice(e,1)},Group.prototype.removeFromDataSet=function(t){this.itemSet.removeItem(t.id)},Group.prototype.order=function(){var t=util.toArray(this.items);this.orderedItems.byStart=t,this.orderedItems.byEnd=this._constructByEndArray(t),stack.orderByStart(this.orderedItems.byStart),stack.orderByEnd(this.orderedItems.byEnd)},Group.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof ItemRange&&e.push(t[i]);return e},Group.prototype._updateVisibleItems=function(t,e,i){var n,r,s=[];if(e.length>0)for(r=0;r<e.length;r++)this._checkIfVisible(e[r],s,i);n=0==s.length?this._binarySearch(t,i,!1):t.byStart.indexOf(s[0]);var o=this._binarySearch(t,i,!0);if(-1!=n){for(r=n;r>=0&&!this._checkIfInvisible(t.byStart[r],s,i);r--);for(r=n+1;r<t.byStart.length&&!this._checkIfInvisible(t.byStart[r],s,i);r++);}if(-1!=o){for(r=o;r>=0&&!this._checkIfInvisible(t.byEnd[r],s,i);r--);for(r=o+1;r<t.byEnd.length&&!this._checkIfInvisible(t.byEnd[r],s,i);r++);}return s},Group.prototype._binarySearch=function(t,e,i){var n=[],r=i?"end":"start";n=1==i?t.byEnd:t.byStart;var s,o=e.end-e.start,a=!1,h=0,u=n.length,l=Math.floor(.5*(u+h));if(0==u)l=-1;else if(1==u)l=n[l].data[r]>e.start-o&&n[l].data[r]<e.end?0:-1;else for(u-=1;0==a;)n[l].data[r]>e.start-o&&n[l].data[r]<e.end?a=!0:(n[l].data[r]<e.start-o?h=Math.floor(.5*(u+h)):u=Math.floor(.5*(u+h)),s=Math.floor(.5*(u+h)),l==s?(l=-1,a=!0):l=s);return l},Group.prototype._checkIfInvisible=function(t,e,i){return t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),-1==e.indexOf(t)&&e.push(t),!1):!0},Group.prototype._checkIfVisible=function(t,e,i){t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()},Emitter(Timeline.prototype),Timeline.prototype.setOptions=function(t){if(util.deepExtend(this.options,t),"editable"in t){var e="boolean"==typeof t.editable;this.options.editable={updateTime:e?t.editable:t.editable.updateTime||!1,updateGroup:e?t.editable:t.editable.updateGroup||!1,add:e?t.editable:t.editable.add||!1,remove:e?t.editable:t.editable.remove||!1}}this.range.setRange(t.start,t.end),("editable"in t||"selectable"in t)&&this.setSelection(this.options.selectable?this.getSelection():[]),this.itemSet.markDirty();var i=function(t){if(!(this.options[t]instanceof Function)||2!=this.options[t].length)throw new Error("option "+t+" must be a function "+t+"(item, callback)")}.bind(this);if(["onAdd","onUpdate","onRemove","onMove"].forEach(i),this.options.showCurrentTime?this.mainPanel.hasChild(this.currentTime)||(this.mainPanel.appendChild(this.currentTime),this.currentTime.start()):this.mainPanel.hasChild(this.currentTime)&&(this.currentTime.stop(),this.mainPanel.removeChild(this.currentTime)),this.options.showCustomTime?this.mainPanel.hasChild(this.customTime)||this.mainPanel.appendChild(this.customTime):this.mainPanel.hasChild(this.customTime)&&this.mainPanel.removeChild(this.customTime),t&&t.order)throw new Error("Option order is deprecated. There is no replacement for this feature.");this.rootPanel.repaint()},Timeline.prototype.setCustomTime=function(t){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");this.customTime.setCustomTime(t)},Timeline.prototype.getCustomTime=function(){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");return this.customTime.getCustomTime()},Timeline.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof DataSet||t instanceof DataView?t:new DataSet(t,{convert:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.itemSet.setItems(e),i&&(void 0==this.options.start||void 0==this.options.end)){this.fit();var n=void 0!=this.options.start?util.convert(this.options.start,"Date"):null,r=void 0!=this.options.end?util.convert(this.options.end,"Date"):null;this.setWindow(n,r)}},Timeline.prototype.setGroups=function(t){var e;e=t?t instanceof DataSet||t instanceof DataView?t:new DataSet(t):null,this.groupsData=e,this.itemSet.setGroups(e)},Timeline.prototype.clear=function(t){(!t||t.items)&&this.setItems(null),(!t||t.groups)&&this.setGroups(null),(!t||t.options)&&this.setOptions(this.defaultOptions)},Timeline.prototype.fit=function(){var t=this.getItemRange(),e=t.min,i=t.max;if(null!=e&&null!=i){var n=i.valueOf()-e.valueOf();0>=n&&(n=864e5),e=new Date(e.valueOf()-.05*n),i=new Date(i.valueOf()+.05*n)}(null!==e||null!==i)&&this.range.setRange(e,i)},Timeline.prototype.getItemRange=function(){var t=this.itemsData,e=null,i=null;if(t){var n=t.min("start");e=n?n.start.valueOf():null;var r=t.max("start");r&&(i=r.start.valueOf());var s=t.max("end");s&&(i=null==i?s.end.valueOf():Math.max(i,s.end.valueOf()))}return{min:null!=e?new Date(e):null,max:null!=i?new Date(i):null}},Timeline.prototype.setSelection=function(t){this.itemSet.setSelection(t)},Timeline.prototype.getSelection=function(){return this.itemSet.getSelection()},Timeline.prototype.setWindow=function(t,e){if(1==arguments.length){var i=arguments[0];this.range.setRange(i.start,i.end)}else this.range.setRange(t,e)},Timeline.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},Timeline.prototype.repaint=function(){this.rootPanel.repaint()},Timeline.prototype._onSelectItem=function(t){if(this.options.selectable){var e=t.gesture.srcEvent&&t.gesture.srcEvent.ctrlKey,i=t.gesture.srcEvent&&t.gesture.srcEvent.shiftKey;if(e||i)return void this._onMultiSelectItem(t);var n=this.getSelection(),r=ItemSet.itemFromTarget(t),s=r?[r.id]:[];this.setSelection(s);var o=this.getSelection();util.equalArray(n,o)||this.emit("select",{items:this.getSelection()}),t.stopPropagation()}},Timeline.prototype._onAddItem=function(t){if(this.options.selectable&&this.options.editable.add){var e=this,i=ItemSet.itemFromTarget(t);if(i){var n=e.itemsData.get(i.id);this.options.onUpdate(n,function(t){t&&e.itemsData.update(t)})}else{var r=vis.util.getAbsoluteLeft(this.contentPanel.frame),s=t.gesture.center.pageX-r,o={start:this.timeAxis.snap(this._toTime(s)),content:"new item"};("range"===this.options.type||"rangeoverflow"==this.options.type)&&(o.end=this.timeAxis.snap(this._toTime(s+this.rootPanel.width/5)));var a=util.randomUUID();o[this.itemsData.fieldId]=a;var h=ItemSet.groupFromTarget(t);h&&(o.group=h.groupId),this.options.onAdd(o,function(t){t&&e.itemsData.add(o)})}}},Timeline.prototype._onMultiSelectItem=function(t){if(this.options.selectable){var e,i=ItemSet.itemFromTarget(t);if(i){e=this.getSelection();var n=e.indexOf(i.id);-1==n?e.push(i.id):e.splice(n,1),this.setSelection(e),this.emit("select",{items:this.getSelection()}),t.stopPropagation()}}},Timeline.prototype._toTime=function(t){var e=this.range.conversion(this.mainPanel.width);return new Date(t/e.scale+e.offset)},Timeline.prototype._toScreen=function(t){var e=this.range.conversion(this.mainPanel.width);return(t.valueOf()-e.offset)*e.scale};var vis={util:util,moment:moment,DataSet:DataSet,DataView:DataView,Range:Range,stack:stack,TimeStep:TimeStep,components:{items:{Item:Item,ItemBox:ItemBox,ItemPoint:ItemPoint,ItemRange:ItemRange},Component:Component,Panel:Panel,RootPanel:RootPanel,ItemSet:ItemSet,TimeAxis:TimeAxis},Timeline:Timeline};"undefined"!=typeof exports&&(exports=vis),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=vis),"function"==typeof define&&define(function(){return vis}),"undefined"!=typeof window&&(window.vis=vis)},{"emitter-component":2,hammerjs:3,moment:4,mousetrap:5}],2:[function(t,e){function i(t){return t?n(t):void 0}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,r=i.length;r>n;++n)i[n].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],3:[function(t,e){!function(t,i){"use strict";function n(){if(!r.READY){r.event.determineEventTypes();for(var t in r.gestures)r.gestures.hasOwnProperty(t)&&r.detection.register(r.gestures[t]);r.event.onTouch(r.DOCUMENT,r.EVENT_MOVE,r.detection.detect),r.event.onTouch(r.DOCUMENT,r.EVENT_END,r.detection.detect),r.READY=!0}}var r=function(t,e){return new r.Instance(t,e||{})};r.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in t,r.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&navigator.userAgent.match(r.MOBILE_REGEX),r.EVENT_TYPES={},r.DIRECTION_DOWN="down",r.DIRECTION_LEFT="left",r.DIRECTION_UP="up",r.DIRECTION_RIGHT="right",r.POINTER_MOUSE="mouse",r.POINTER_TOUCH="touch",r.POINTER_PEN="pen",r.EVENT_START="start",r.EVENT_MOVE="move",r.EVENT_END="end",r.DOCUMENT=document,r.plugins={},r.READY=!1,r.Instance=function(t,e){var i=this;return n(),this.element=t,this.enabled=!0,this.options=r.utils.extend(r.utils.extend({},r.defaults),e||{}),this.options.stop_browser_behavior&&r.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),r.event.onTouch(t,r.EVENT_START,function(t){i.enabled&&r.detection.startDetect(i,t)}),this},r.Instance.prototype={on:function(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)this.element.addEventListener(i[n],e,!1);return this},off:function(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)this.element.removeEventListener(i[n],e,!1);return this},trigger:function(t,e){var i=r.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e;var n=this.element;return r.utils.hasParent(e.target,n)&&(n=e.target),n.dispatchEvent(i),this},enable:function(t){return this.enabled=t,this}};var s=null,o=!1,a=!1;r.event={bindDom:function(t,e,i){for(var n=e.split(" "),r=0;r<n.length;r++)t.addEventListener(n[r],i,!1)},onTouch:function(t,e,i){var n=this;this.bindDom(t,r.EVENT_TYPES[e],function(h){var u=h.type.toLowerCase();if(!u.match(/mouse/)||!a){(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===h.which)&&(o=!0),u.match(/touch|pointer/)&&(a=!0);var l=0;o&&(r.HAS_POINTEREVENTS&&e!=r.EVENT_END?l=r.PointerEvent.updatePointer(e,h):u.match(/touch/)?l=h.touches.length:a||(l=u.match(/up/)?0:1),l>0&&e==r.EVENT_END?e=r.EVENT_MOVE:l||(e=r.EVENT_END),l||null===s?s=h:h=s,i.call(r.detection,n.collectEventData(t,e,h)),r.HAS_POINTEREVENTS&&e==r.EVENT_END&&(l=r.PointerEvent.updatePointer(e,h))),l||(s=null,o=!1,a=!1,r.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=r.HAS_POINTEREVENTS?r.PointerEvent.getEvents():r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],r.EVENT_TYPES[r.EVENT_START]=t[0],r.EVENT_TYPES[r.EVENT_MOVE]=t[1],r.EVENT_TYPES[r.EVENT_END]=t[2]},getTouchList:function(t){return r.HAS_POINTEREVENTS?r.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,i){var n=this.getTouchList(i,e),s=r.POINTER_TOUCH;return(i.type.match(/mouse/)||r.PointerEvent.matchType(r.POINTER_MOUSE,i))&&(s=r.POINTER_MOUSE),{center:r.utils.getCenter(n),timeStamp:(new Date).getTime(),target:i.target,touches:n,eventType:e,pointerType:s,srcEvent:i,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return r.detection.stopDetect()}}}},r.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(i){e.push(t.pointers[i])}),e},updatePointer:function(t,e){return t==r.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var i={};return i[r.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==r.POINTER_MOUSE,i[r.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==r.POINTER_TOUCH,i[r.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==r.POINTER_PEN,i[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},r.utils={extend:function(t,e,n){for(var r in e)t[r]!==i&&n||(t[r]=e[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],i=[],n=0,r=t.length;r>n;n++)e.push(t[n].pageX),i.push(t[n].pageY);
return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,i)+Math.max.apply(Math,i))/2}},getVelocity:function(t,e,i){return{x:Math.abs(e/t)||0,y:Math.abs(i/t)||0}},getAngle:function(t,e){var i=e.pageY-t.pageY,n=e.pageX-t.pageX;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(t,e){var i=Math.abs(t.pageX-e.pageX),n=Math.abs(t.pageY-e.pageY);return i>=n?t.pageX-e.pageX>0?r.DIRECTION_LEFT:r.DIRECTION_RIGHT:t.pageY-e.pageY>0?r.DIRECTION_UP:r.DIRECTION_DOWN},getDistance:function(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==r.DIRECTION_UP||t==r.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var i,n=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var r=0;r<n.length;r++)for(var s in e)e.hasOwnProperty(s)&&(i=s,n[r]&&(i=n[r]+i.substring(0,1).toUpperCase()+i.substring(1)),t.style[i]=e[s]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:r.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,i=0,n=this.gestures.length;n>i;i++){var s=this.gestures[i];if(!this.stopped&&e[s.name]!==!1&&s.handler.call(s,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==r.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=r.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var i=0,n=t.touches.length;n>i;i++)e.touches.push(r.utils.extend({},t.touches[i]))}var s=t.timeStamp-e.timeStamp,o=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,h=r.utils.getVelocity(s,o,a);return r.utils.extend(t,{deltaTime:s,deltaX:o,deltaY:a,velocityX:h.x,velocityY:h.y,distance:r.utils.getDistance(e.center,t.center),angle:r.utils.getAngle(e.center,t.center),direction:r.utils.getDirection(e.center,t.center),scale:r.utils.getScale(e.touches,t.touches),rotation:r.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var e=t.defaults||{};return e[t.name]===i&&(e[t.name]=!0),r.utils.extend(r.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},r.gestures=r.gestures||{},r.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case r.EVENT_START:clearTimeout(this.timer),r.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==r.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case r.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case r.EVENT_END:clearTimeout(this.timer)}}},r.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==r.EVENT_END){var i=r.detection.previous,n=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;i&&"tap"==i.name&&t.timeStamp-i.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),n=!0),(!n||e.options.tap_always)&&(r.detection.current.name="tap",e.trigger(r.detection.current.name,t))}}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==r.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},r.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,e){if(r.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches))switch(t.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:if(t.distance<e.options.drag_min_distance&&r.detection.current.name!=this.name)return;r.detection.current.name=this.name,(r.detection.current.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var i=r.detection.current.lastEvent.direction;t.drag_locked_to_axis&&i!==t.direction&&(t.direction=r.utils.isVertical(i)?t.deltaY<0?r.DIRECTION_UP:r.DIRECTION_DOWN:t.deltaX<0?r.DIRECTION_LEFT:r.DIRECTION_RIGHT),this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),e.trigger(this.name+t.direction,t),(e.options.drag_block_vertical&&r.utils.isVertical(t.direction)||e.options.drag_block_horizontal&&!r.utils.isVertical(t.direction))&&t.preventDefault();break;case r.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},r.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,e){if(r.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2))switch(e.options.transform_always_block&&t.preventDefault(),t.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:var i=Math.abs(1-t.scale),n=Math.abs(t.rotation);if(i<e.options.transform_min_scale&&n<e.options.transform_min_rotation)return;r.detection.current.name=this.name,this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),n>e.options.transform_min_rotation&&e.trigger("rotate",t),i>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case r.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},r.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,e){return e.options.prevent_mouseevents&&t.pointerType==r.POINTER_MOUSE?void t.stopDetect():(e.options.prevent_default&&t.preventDefault(),void(t.eventType==r.EVENT_START&&e.trigger(this.name,t)))}},r.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==r.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof e&&"object"==typeof e.exports?e.exports=r:(t.Hammer=r,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return r}))}(this)},{}],4:[function(t,e){var i="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};(function(n){function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function s(t,e){function i(){pe.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var n=!0;return p(function(){return n&&(i(),n=!1),e.apply(this,arguments)},e)}function o(t,e){return function(i){return m(t.call(this,i),e)}}function a(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function h(){}function u(t){M(t),p(this,t)}function l(t){var e=S(t),i=e.year||0,n=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,h=e.minute||0,u=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*u+6e4*h+36e5*a,this._days=+o+7*s,this._months=+r+3*n+12*i,this._data={},this._bubble()}function p(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function d(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&De.hasOwnProperty(e)&&(i[e]=t[e]);return i}function c(t){return 0>t?Math.ceil(t):Math.floor(t)}function m(t,e,i){for(var n=""+Math.abs(t),r=t>=0;n.length<e;)n="0"+n;return(r?i?"+":"":"-")+n}function f(t,e,i,n){var r=e._milliseconds,s=e._days,o=e._months;n=null==n?!0:n,r&&t._d.setTime(+t._d+r*i),s&&oe(t,"Date",se(t,"Date")+s*i),o&&re(t,se(t,"Month")+o*i),n&&pe.updateOffset(t,s||o)}function g(t){return"[object Array]"===Object.prototype.toString.call(t)}function v(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function y(t,e,i){var n,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(n=0;r>n;n++)(i&&t[n]!==e[n]||!i&&T(t[n])!==T(e[n]))&&o++;return o+s}function _(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=ti[t]||ei[e]||e}return t}function S(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=_(i),e&&(n[e]=t[i]));return n}function b(t){var e,i;if(0===t.indexOf("week"))e=7,i="day";else{if(0!==t.indexOf("month"))return;e=12,i="month"}pe[t]=function(r,s){var o,a,h=pe.fn._lang[t],u=[];if("number"==typeof r&&(s=r,r=n),a=function(t){var e=pe().utc().set(i,t);return h.call(pe.fn._lang,e,r||"")},null!=s)return a(s);for(o=0;e>o;o++)u.push(a(o));return u}}function T(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function w(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function E(t,e,i){return ee(pe([t,11,31+e-i]),e,i).week}function D(t){return I(t)?366:365}function I(t){return t%4===0&&t%100!==0||t%400===0}function M(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[ye]<0||t._a[ye]>11?ye:t._a[_e]<1||t._a[_e]>w(t._a[ve],t._a[ye])?_e:t._a[Se]<0||t._a[Se]>23?Se:t._a[be]<0||t._a[be]>59?be:t._a[Te]<0||t._a[Te]>59?Te:t._a[we]<0||t._a[we]>999?we:-1,t._pf._overflowDayOfYear&&(ve>e||e>_e)&&(e=_e),t._pf.overflow=e)}function C(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function O(t){return t?t.toLowerCase().replace("_","-"):t}function x(t,e){return e._isUTC?pe(t).zone(e._offset||0):pe(t).local()}function N(t,e){return e.abbr=t,Ee[t]||(Ee[t]=new h),Ee[t].set(e),Ee[t]}function P(t){delete Ee[t]}function k(e){var i,n,r,s,o=0,a=function(e){if(!Ee[e]&&Ie)try{t("./lang/"+e)}catch(i){}return Ee[e]};if(!e)return pe.fn._lang;if(!g(e)){if(n=a(e))return n;e=[e]}for(;o<e.length;){for(s=O(e[o]).split("-"),i=s.length,r=O(e[o+1]),r=r?r.split("-"):null;i>0;){if(n=a(s.slice(0,i).join("-")))return n;if(r&&r.length>=i&&y(s,r,!0)>=i-1)break;i--}o++}return pe.fn._lang}function A(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function L(t){var e,i,n=t.match(xe);for(e=0,i=n.length;i>e;e++)n[e]=si[n[e]]?si[n[e]]:A(n[e]);return function(r){var s="";for(e=0;i>e;e++)s+=n[e]instanceof Function?n[e].call(r,t):n[e];return s}}function Y(t,e){return t.isValid()?(e=R(e,t.lang()),ii[e]||(ii[e]=L(e)),ii[e](t)):t.lang().invalidDate()}function R(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Ne.lastIndex=0;n>=0&&Ne.test(t);)t=t.replace(Ne,i),Ne.lastIndex=0,n-=1;return t}function H(t,e){var i,n=e._strict;switch(t){case"Q":return Ve;case"DDDD":return We;case"YYYY":case"GGGG":case"gggg":return n?ze:Ae;case"Y":case"G":case"g":return Xe;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Be:Le;case"S":if(n)return Ve;case"SS":if(n)return Fe;case"SSS":if(n)return We;case"DDD":return ke;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Re;case"a":case"A":return k(e._l)._meridiemParse;case"X":return Ge;case"Z":case"ZZ":return He;case"T":return Ue;case"SSSS":return Ye;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Fe:Pe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pe;case"Do":return je;default:return i=new RegExp(B(z(t.replace("\\","")),"i"))}}function U(t){t=t||"";var e=t.match(He)||[],i=e[e.length-1]||[],n=(i+"").match(Je)||["-",0,0],r=+(60*n[1])+T(n[2]);return"+"===n[0]?-r:r}function G(t,e,i){var n,r=i._a;switch(t){case"Q":null!=e&&(r[ye]=3*(T(e)-1));break;case"M":case"MM":null!=e&&(r[ye]=T(e)-1);break;case"MMM":case"MMMM":n=k(i._l).monthsParse(e),null!=n?r[ye]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[_e]=T(e));break;case"Do":null!=e&&(r[_e]=T(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=T(e));break;case"YY":r[ve]=pe.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[ve]=T(e);break;case"a":case"A":i._isPm=k(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":r[Se]=T(e);break;case"m":case"mm":r[be]=T(e);break;case"s":case"ss":r[Te]=T(e);break;case"S":case"SS":case"SSS":case"SSSS":r[we]=T(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=U(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=e)}}function j(t){var e,i,n,r,s,o,a,h,u,l,p=[];if(!t._d){for(n=F(t),t._w&&null==t._a[_e]&&null==t._a[ye]&&(s=function(e){var i=parseInt(e,10);return e?e.length<3?i>68?1900+i:2e3+i:i:null==t._a[ve]?pe().weekYear():t._a[ve]},o=t._w,null!=o.GG||null!=o.W||null!=o.E?a=ie(s(o.GG),o.W||1,o.E,4,1):(h=k(t._l),u=null!=o.d?J(o.d,h):null!=o.e?parseInt(o.e,10)+h._week.dow:0,l=parseInt(o.w,10)||1,null!=o.d&&u<h._week.dow&&l++,a=ie(s(o.gg),l,u,h._week.doy,h._week.dow)),t._a[ve]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(r=null==t._a[ve]?n[ve]:t._a[ve],t._dayOfYear>D(r)&&(t._pf._overflowDayOfYear=!0),i=$(r,0,t._dayOfYear),t._a[ye]=i.getUTCMonth(),t._a[_e]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=p[e]=n[e];for(;7>e;e++)t._a[e]=p[e]=null==t._a[e]?2===e?1:0:t._a[e];p[Se]+=T((t._tzm||0)/60),p[be]+=T((t._tzm||0)%60),t._d=(t._useUTC?$:K).apply(null,p)}}function V(t){var e;t._d||(e=S(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],j(t))}function F(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function W(t){t._a=[],t._pf.empty=!0;var e,i,n,r,s,o=k(t._l),a=""+t._i,h=a.length,u=0;for(n=R(t._f,o).match(xe)||[],e=0;e<n.length;e++)r=n[e],i=(a.match(H(r,t))||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&t._pf.unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),u+=i.length),si[r]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(r),G(r,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=h-u,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[Se]<12&&(t._a[Se]+=12),t._isPm===!1&&12===t._a[Se]&&(t._a[Se]=0),j(t),M(t)}function z(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r})}function B(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(t){var e,i,n,s,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)o=0,e=p({},t),e._pf=r(),e._f=t._f[s],W(e),C(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==n||n>o)&&(n=o,i=e));p(t,i||e)}function q(t){var e,i,n=t._i,r=qe.exec(n);if(r){for(t._pf.iso=!0,e=0,i=Ke.length;i>e;e++)if(Ke[e][1].exec(n)){t._f=Ke[e][0]+(r[6]||" ");break}for(e=0,i=$e.length;i>e;e++)if($e[e][1].exec(n)){t._f+=$e[e][0];break}n.match(He)&&(t._f+="Z"),W(t)}else pe.createFromInputFallback(t)}function Z(t){var e=t._i,i=Me.exec(e);e===n?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof e?q(t):g(e)?(t._a=e.slice(0),j(t)):v(e)?t._d=new Date(+e):"object"==typeof e?V(t):"number"==typeof e?t._d=new Date(e):pe.createFromInputFallback(t)}function K(t,e,i,n,r,s,o){var a=new Date(t,e,i,n,r,s,o);return 1970>t&&a.setFullYear(t),a}function $(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function J(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function Q(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function te(t,e,i){var n=ge(Math.abs(t)/1e3),r=ge(n/60),s=ge(r/60),o=ge(s/24),a=ge(o/365),h=45>n&&["s",n]||1===r&&["m"]||45>r&&["mm",r]||1===s&&["h"]||22>s&&["hh",s]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",ge(o/30)]||1===a&&["y"]||["yy",a];return h[2]=e,h[3]=t>0,h[4]=i,Q.apply({},h)}function ee(t,e,i){var n,r=i-e,s=i-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),n=pe(t).add("d",s),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ie(t,e,i,n,r){var s,o,a=$(t,0,1).getUTCDay();return i=null!=i?i:r,s=r-a+(a>n?7:0)-(r>a?7:0),o=7*(e-1)+(i-r)+s+1,{year:o>0?t:t-1,dayOfYear:o>0?o:D(t-1)+o}}function ne(t){var e=t._i,i=t._f;return null===e||i===n&&""===e?pe.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=k().preparse(e)),pe.isMoment(e)?(t=d(e),t._d=new Date(+e._d)):i?g(i)?X(t):W(t):Z(t),new u(t))}function re(t,e){var i;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),w(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function se(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function oe(t,e,i){return"Month"===e?re(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function ae(t,e){return function(i){return null!=i?(oe(this,t,i),pe.updateOffset(this,e),this):se(this,t)}}function he(t){pe.duration.fn[t]=function(){return this._data[t]}}function ue(t,e){pe.duration.fn["as"+t]=function(){return+this/e}}function le(t){"undefined"==typeof ender&&(de=fe.moment,fe.moment=t?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",pe):pe)}for(var pe,de,ce,me="2.6.0",fe="undefined"!=typeof i?i:this,ge=Math.round,ve=0,ye=1,_e=2,Se=3,be=4,Te=5,we=6,Ee={},De={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Ie="undefined"!=typeof e&&e.exports,Me=/^\/?Date\((\-?\d+)/i,Ce=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Oe=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,xe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ne=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pe=/\d\d?/,ke=/\d{1,3}/,Ae=/\d{1,4}/,Le=/[+\-]?\d{1,6}/,Ye=/\d+/,Re=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,He=/Z|[\+\-]\d\d:?\d\d/gi,Ue=/T/i,Ge=/[\+\-]?\d+(\.\d{1,3})?/,je=/\d{1,2}/,Ve=/\d/,Fe=/\d\d/,We=/\d{3}/,ze=/\d{4}/,Be=/[+-]?\d{6}/,Xe=/[+-]?\d+/,qe=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ze="YYYY-MM-DDTHH:mm:ssZ",Ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],$e=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Je=/([\+\-]|\d\d)/gi,Qe=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ti={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ei={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ii={},ni="DDD w W M D d".split(" "),ri="M D H h m s w W".split(" "),si={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+m(Math.abs(t),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return m(T(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+m(T(t/60),2)+":"+m(T(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+m(T(t/60),2)+m(T(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},oi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ni.length;)ce=ni.pop(),si[ce+"o"]=a(si[ce],ce);for(;ri.length;)ce=ri.pop(),si[ce+ce]=o(si[ce],2);for(si.DDDD=o(si.DDD,3),p(h.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=pe.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=pe([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(t,e,i,n):r.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ee(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),pe=function(t,e,i,s){var o;return"boolean"==typeof i&&(s=i,i=n),o={},o._isAMomentObject=!0,o._i=t,o._f=e,o._l=i,o._strict=s,o._isUTC=!1,o._pf=r(),ne(o)},pe.suppressDeprecationWarnings=!1,pe.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),pe.utc=function(t,e,i,s){var o;return"boolean"==typeof i&&(s=i,i=n),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=i,o._i=t,o._f=e,o._strict=s,o._pf=r(),ne(o).utc()},pe.unix=function(t){return pe(1e3*t)},pe.duration=function(t,e){var i,n,r,s=t,o=null;return pe.isDuration(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(o=Ce.exec(t))?(i="-"===o[1]?-1:1,s={y:0,d:T(o[_e])*i,h:T(o[Se])*i,m:T(o[be])*i,s:T(o[Te])*i,ms:T(o[we])*i}):(o=Oe.exec(t))&&(i="-"===o[1]?-1:1,r=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},s={y:r(o[2]),M:r(o[3]),d:r(o[4]),h:r(o[5]),m:r(o[6]),s:r(o[7]),w:r(o[8])}),n=new l(s),pe.isDuration(t)&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},pe.version=me,pe.defaultFormat=Ze,pe.momentProperties=De,pe.updateOffset=function(){},pe.lang=function(t,e){var i;return t?(e?N(O(t),e):null===e?(P(t),t="en"):Ee[t]||k(t),i=pe.duration.fn._lang=pe.fn._lang=k(t),i._abbr):pe.fn._lang._abbr},pe.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),k(t)},pe.isMoment=function(t){return t instanceof u||null!=t&&t.hasOwnProperty("_isAMomentObject")},pe.isDuration=function(t){return t instanceof l},ce=oi.length-1;ce>=0;--ce)b(oi[ce]);pe.normalizeUnits=function(t){return _(t)},pe.invalid=function(t){var e=pe.utc(0/0);return null!=t?p(e._pf,t):e._pf.userInvalidated=!0,e},pe.parseZone=function(){return pe.apply(null,arguments).parseZone()},pe.parseTwoDigitYear=function(t){return T(t)+(T(t)>68?1900:2e3)},p(pe.fn=u.prototype,{clone:function(){return pe(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=pe(this).utc();return 0<t.year()&&t.year()<=9999?Y(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return C(this)},isDSTShifted:function(){return this._a?this.isValid()&&y(this._a,(this._isUTC?pe.utc(this._a):pe(this._a)).toArray())>0:!1},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=Y(this,t||pe.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?pe.duration(+e,t):pe.duration(t,e),f(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?pe.duration(+e,t):pe.duration(t,e),f(this,i,-1),this},diff:function(t,e,i){var n,r,s=x(t,this),o=6e4*(this.zone()-s.zone());return e=_(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+s.daysInMonth()),r=12*(this.year()-s.year())+(this.month()-s.month()),r+=(this-pe(this).startOf("month")-(s-pe(s).startOf("month")))/n,r-=6e4*(this.zone()-pe(this).startOf("month").zone()-(s.zone()-pe(s).startOf("month").zone()))/n,"year"===e&&(r/=12)):(n=this-s,r="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-o)/864e5:"week"===e?(n-o)/6048e5:n),i?r:c(r)},from:function(t,e){return pe.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(pe(),t)},calendar:function(){var t=x(pe(),this).startOf("day"),e=this.diff(t,"days",!0),i=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){return I(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=J(t,this.lang()),this.add({d:t-e})):e},month:ae("Month",!0),startOf:function(t){switch(t=_(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=_(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+pe(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+pe(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+x(t,this).startOf(e)},min:function(t){return t=pe.apply(null,arguments),this>t?this:t},max:function(t){return t=pe.apply(null,arguments),t>this?this:t},zone:function(t,e){var i=this._offset||0;return null==t?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof t&&(t=U(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,i!==t&&(!e||this._changeInProgress?f(this,pe.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,pe.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?pe(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return w(this.year(),this.month())},dayOfYear:function(t){var e=ge((pe(this).startOf("day")-pe(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ee(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=ee(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=ee(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return E(this.year(),t.dow,t.doy)},get:function(t){return t=_(t),this[t]()
},set:function(t,e){return t=_(t),"function"==typeof this[t]&&this[t](e),this},lang:function(t){return t===n?this._lang:(this._lang=k(t),this)}}),pe.fn.millisecond=pe.fn.milliseconds=ae("Milliseconds",!1),pe.fn.second=pe.fn.seconds=ae("Seconds",!1),pe.fn.minute=pe.fn.minutes=ae("Minutes",!1),pe.fn.hour=pe.fn.hours=ae("Hours",!0),pe.fn.date=ae("Date",!0),pe.fn.dates=s("dates accessor is deprecated. Use date instead.",ae("Date",!0)),pe.fn.year=ae("FullYear",!0),pe.fn.years=s("years accessor is deprecated. Use year instead.",ae("FullYear",!0)),pe.fn.days=pe.fn.day,pe.fn.months=pe.fn.month,pe.fn.weeks=pe.fn.week,pe.fn.isoWeeks=pe.fn.isoWeek,pe.fn.quarters=pe.fn.quarter,pe.fn.toJSON=pe.fn.toISOString,p(pe.duration.fn=l.prototype,{_bubble:function(){var t,e,i,n,r=this._milliseconds,s=this._days,o=this._months,a=this._data;a.milliseconds=r%1e3,t=c(r/1e3),a.seconds=t%60,e=c(t/60),a.minutes=e%60,i=c(e/60),a.hours=i%24,s+=c(i/24),a.days=s%30,o+=c(s/30),a.months=o%12,n=c(o/12),a.years=n},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(t){var e=+this,i=te(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=pe.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=pe.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=_(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=_(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:pe.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||r||s?"T":"")+(n?n+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"}});for(ce in Qe)Qe.hasOwnProperty(ce)&&(ue(ce,Qe[ce]),he(ce.toLowerCase()));ue("Weeks",6048e5),pe.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},pe.lang("en",{ordinal:function(t){var e=t%10,i=1===T(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),Ie?e.exports=pe:"function"==typeof define&&define.amd?(define("moment",function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(fe.moment=de),pe}),le(!0)):le()}).call(this)},{}],5:[function(t,e){function i(t,e,i){return t.addEventListener?t.addEventListener(e,i,!1):void t.attachEvent("on"+e,i)}function n(t){return"keypress"==t.type?String.fromCharCode(t.which):b[t.which]?b[t.which]:T[t.which]?T[t.which]:String.fromCharCode(t.which).toLowerCase()}function r(t){var e=t.target||t.srcElement,i=e.tagName;return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==i||"SELECT"==i||"TEXTAREA"==i||e.contentEditable&&"true"==e.contentEditable}function s(t,e){return t.sort().join(",")===e.sort().join(",")}function o(t){t=t||{};var e,i=!1;for(e in M)t[e]?i=!0:M[e]=0;i||(O=!1)}function a(t,e,i,n,r){var o,a,h=[];if(!D[t])return[];for("keyup"==i&&d(t)&&(e=[t]),o=0;o<D[t].length;++o)a=D[t][o],a.seq&&M[a.seq]!=a.level||i==a.action&&("keypress"==i||s(e,a.modifiers))&&(n&&a.combo==r&&D[t].splice(o,1),h.push(a));return h}function h(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function u(t,e){t(e)===!1&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0)}function l(t,e){if(!r(e)){var i,n=a(t,h(e),e.type),s={},l=!1;for(i=0;i<n.length;++i)n[i].seq?(l=!0,s[n[i].seq]=1,u(n[i].callback,e)):l||O||u(n[i].callback,e);e.type!=O||d(t)||o(s)}}function p(t){t.which="number"==typeof t.which?t.which:t.keyCode;var e=n(t);if(e)return"keyup"==t.type&&C==e?void(C=!1):void l(e,t)}function d(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function c(){clearTimeout(S),S=setTimeout(o,1e3)}function m(){if(!_){_={};for(var t in b)t>95&&112>t||b.hasOwnProperty(t)&&(_[b[t]]=t)}return _}function f(t,e,i){return i||(i=m()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function g(t,e,i,r){M[t]=0,r||(r=f(e[0],[]));var s,a=function(){O=r,++M[t],c()},h=function(t){u(i,t),"keyup"!==r&&(C=n(t)),setTimeout(o,10)};for(s=0;s<e.length;++s)v(e[s],s<e.length-1?a:h,r,t,s)}function v(t,e,i,n,r){t=t.replace(/\s+/g," ");var s,o,h,u=t.split(" "),l=[];if(u.length>1)return g(t,u,e,i);for(h="+"===t?["+"]:t.split("+"),s=0;s<h.length;++s)o=h[s],E[o]&&(o=E[o]),i&&"keypress"!=i&&w[o]&&(o=w[o],l.push("shift")),d(o)&&l.push(o);i=f(o,l,i),D[o]||(D[o]=[]),a(o,l,i,!n,t),D[o][n?"unshift":"push"]({callback:e,modifiers:l,action:i,seq:n,level:r,combo:t})}function y(t,e,i){for(var n=0;n<t.length;++n)v(t[n],e,i)}for(var _,S,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},T={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},E={option:"alt",command:"meta","return":"enter",escape:"esc"},D={},I={},M={},C=!1,O=!1,x=1;20>x;++x)b[111+x]="f"+x;for(x=0;9>=x;++x)b[x+96]=x;i(document,"keypress",p),i(document,"keydown",p),i(document,"keyup",p);var N={bind:function(t,e,i){return y(t instanceof Array?t:[t],e,i),I[t+":"+i]=e,this},unbind:function(t,e){return I[t+":"+e]&&(delete I[t+":"+e],this.bind(t,function(){},e)),this},trigger:function(t,e){return I[t+":"+e](),this},reset:function(){return D={},I={},this}};e.exports=N},{}]},{},[1])(1)});
